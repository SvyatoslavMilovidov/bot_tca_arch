# üß© –ü–∞–∫–µ—Ç `node`

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
1. [–û–ø–∏—Å–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–∞](#–æ–ø–∏—Å–∞–Ω–∏–µ-–ø–∞–∫–µ—Ç–∞)
2. [–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
3. [–¢–∏–ø—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤](#—Ç–∏–ø—ã-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)
   - [Trigger](#trigger---–≤–∏–∑—É–∞–ª—å–Ω—ã–µ-–æ–ø–µ—Ä–∞—Ü–∏–∏)
   - [Code](#code---–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
   - [Answer](#answer---–æ—Ç—Ä–∏—Å–æ–≤–∫–∞-—ç–∫—Ä–∞–Ω–æ–≤)
   - [–†–∞–±–æ—Ç–∞ —Å FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏](#-—Ä–∞–±–æ—Ç–∞-—Å-fsm-—Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏---–ø–æ–ª–Ω—ã–π-–ø—Ä–∏–º–µ—Ä)
4. [–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤](#–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)
5. [–ß–µ–∫-–ª–∏—Å—Ç—ã](#—á–µ–∫-–ª–∏—Å—Ç—ã)

---

## –û–ø–∏—Å–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–∞

### üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–ü–∞–∫–µ—Ç `node` —Å–æ–¥–µ—Ä–∂–∏—Ç **–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≤–∏–¥–∂–µ—Ç–æ–≤. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω—ã –ø–æ **—Ç–µ–≥–∞–º** (—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –æ–±–ª–∞—Å—Ç—è–º) –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–µ –±–ª–æ–∫–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤.

### üè∑Ô∏è –°–∏—Å—Ç–µ–º–∞ —Ç–µ–≥–æ–≤
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –ø–æ **—Ç–µ–≥–∞–º** - –ª–æ–≥–∏—á–µ—Å–∫–∏–º –±–ª–æ–∫–∞–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏.

**–ü—Ä–∏–º–µ—Ä—ã —Ç–µ–≥–æ–≤:**
- `control` - —É–ø—Ä–∞–≤–ª—è—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã (/start, /settings)
- `vacancy` - —Ä–∞–±–æ—Ç–∞ —Å –≤–∞–∫–∞–Ω—Å–∏—è–º–∏
- `payment` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
- `interview` - –ø—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤—å—é

### üí° –ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è

**–í–∏–¥–∂–µ—Ç = –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**

–í–∏–¥–∂–µ—Ç –≤ `handler/` –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–≥–∏–∫–∏ –Ω–∞–ø—Ä—è–º—É—é, –∞ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∏–∑ –≥–æ—Ç–æ–≤—ã—Ö –∫–∏—Ä–ø–∏—á–∏–∫–æ–≤:
- **Trigger** –∏–∑ `node/{tag}/trigger/` - –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- **Code** –∏–∑ `node/{tag}/code/` - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- **Answer** –∏–∑ `node/{tag}/answer/` - –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ —ç–∫—Ä–∞–Ω–æ–≤

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         handler/start_command_widget.py     ‚îÇ
‚îÇ                (–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä)                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  1. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–∑ node/         ‚îÇ
‚îÇ  2. –°–æ–∑–¥–∞–µ—Ç —Ä–µ–µ—Å—Ç—Ä Answer-–æ–≤                ‚îÇ
‚îÇ  3. –í—ã–∑—ã–≤–∞–µ—Ç: Trigger ‚Üí Code ‚Üí Answer       ‚îÇ
‚îÇ  4. –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –≤ —Ä–æ—É—Ç–µ—Ä–µ                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚Üì              ‚Üì              ‚Üì
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ Trigger ‚îÇ   ‚îÇ  Code   ‚îÇ   ‚îÇ Answer  ‚îÇ
    ‚îÇ (node/) ‚îÇ   ‚îÇ (node/) ‚îÇ   ‚îÇ (node/) ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### ‚ú® –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- ‚úÖ **–ü–æ–ª–Ω–æ–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** - –æ–¥–∏–Ω Answer –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ä–∞–∑–Ω—ã—Ö –≤–∏–¥–∂–µ—Ç–∞—Ö
- ‚úÖ **–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ** - –ø–æ–º–µ–Ω—è–ª –ª–æ–≥–∏–∫—É –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ ‚Üí –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–µ–∑–¥–µ
- ‚úÖ **LEGO-–ø–æ–¥—Ö–æ–¥** - —Å–æ–±–∏—Ä–∞–µ–º –≤–∏–¥–∂–µ—Ç—ã –∏–∑ –≥–æ—Ç–æ–≤—ã—Ö –±–ª–æ–∫–æ–≤
- ‚úÖ **–õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** - –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ
- ‚úÖ **–ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ** - –≤–∏–∑—É–∞–ª, –ª–æ–≥–∏–∫–∞ –∏ UI —Ä–∞–∑–¥–µ–ª–µ–Ω—ã
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –¥–æ–±–∞–≤–ª—è–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∞ –Ω–µ –∫–æ–ø–∏—Ä—É–µ–º –∫–æ–¥

---

## –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–∞

```
node/
‚îú‚îÄ‚îÄ {tag_name}/                    # –¢–µ–≥ (—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –æ–±–ª–∞—Å—Ç—å)
‚îÇ   ‚îú‚îÄ‚îÄ trigger/                   # Trigger-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ç–µ–≥–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ {action}_trigger.py   # –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π Trigger
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ code/                      # Code-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ç–µ–≥–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ {action}_code.py      # –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π Code
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îî‚îÄ‚îÄ answer/                    # Answer-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ç–µ–≥–∞
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îú‚îÄ‚îÄ {state}_answer.py     # –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π Answer
‚îÇ       ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ {another_tag}/
    ‚îî‚îÄ‚îÄ ...
```

### üì± –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```
node/
‚îú‚îÄ‚îÄ control/                           # –¢–µ–≥: control
‚îÇ   ‚îú‚îÄ‚îÄ trigger/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ start_command_trigger.py   # StartCommandTrigger
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ settings_command_trigger.py
‚îÇ   ‚îú‚îÄ‚îÄ code/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ start_command_code.py      # StartCommandCode
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ settings_command_code.py
‚îÇ   ‚îî‚îÄ‚îÄ answer/
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îú‚îÄ‚îÄ new_user_answer.py         # NewUserAnswer
‚îÇ       ‚îú‚îÄ‚îÄ vacancy_list_answer.py     # VacancyListAnswer (–æ–±—â–∏–π!)
‚îÇ       ‚îî‚îÄ‚îÄ profile_answer.py
‚îÇ
‚îú‚îÄ‚îÄ vacancy/                           # –¢–µ–≥: vacancy
‚îÇ   ‚îú‚îÄ‚îÄ trigger/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ list_vacancies_trigger.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ select_vacancy_trigger.py
‚îÇ   ‚îú‚îÄ‚îÄ code/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ list_vacancies_code.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ select_vacancy_code.py
‚îÇ   ‚îî‚îÄ‚îÄ answer/
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îú‚îÄ‚îÄ vacancy_detail_answer.py
‚îÇ       ‚îú‚îÄ‚îÄ vacancy_empty_answer.py
‚îÇ       ‚îî‚îÄ‚îÄ vacancy_deleted_answer.py
‚îÇ
‚îî‚îÄ‚îÄ payment/                           # –¢–µ–≥: payment
    ‚îú‚îÄ‚îÄ trigger/
    ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
    ‚îÇ   ‚îî‚îÄ‚îÄ select_package_trigger.py
    ‚îú‚îÄ‚îÄ code/
    ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
    ‚îÇ   ‚îî‚îÄ‚îÄ select_package_code.py
    ‚îî‚îÄ‚îÄ answer/
        ‚îú‚îÄ‚îÄ __init__.py
        ‚îú‚îÄ‚îÄ package_list_answer.py
        ‚îî‚îÄ‚îÄ payment_success_answer.py
```

### üéØ –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏ –∫–ª–∞—Å—Å–æ–≤

**–ü—Ä–∞–≤–∏–ª–æ:** `{–Ω–∞–∑–≤–∞–Ω–∏–µ}_{—Ç–∏–ø}.py` ‚Üí `{–ù–∞–∑–≤–∞–Ω–∏–µ}{–¢–∏–ø}`

| –¢–∏–ø | –§–∞–π–ª | –ö–ª–∞—Å—Å |
|-----|------|-------|
| **Trigger** | `start_command_trigger.py` | `StartCommandTrigger` |
| **Code** | `start_command_code.py` | `StartCommandCode` |
| **Answer** | `vacancy_list_answer.py` | `VacancyListAnswer` |

---

## –¢–∏–ø—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### Trigger - –í–∏–∑—É–∞–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

#### üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
Trigger –æ—Ç–≤–µ—á–∞–µ—Ç **—Ç–æ–ª—å–∫–æ –∑–∞ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏**. –≠—Ç–æ –ø–µ—Ä–≤—ã–π —ç—Ç–∞–ø –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏—è, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç UI –∫ –ø–æ–∫–∞–∑—É –Ω–æ–≤–æ–≥–æ —ç–∫—Ä–∞–Ω–∞.

#### ‚úÖ –û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ Trigger

- **–£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–û—Ç–ø—Ä–∞–≤–∫–∞ —Å—Ç–∏–∫–µ—Ä–æ–≤/–∞–Ω–∏–º–∞—Ü–∏–π –∑–∞–≥—Ä—É–∑–∫–∏**
- **–°–±—Ä–æ—Å FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è** (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ): `await state.set_state(None)`
- **–û—á–∏—Å—Ç–∫–∞ FSM –¥–∞–Ω–Ω—ã—Ö** (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ): `await state.set_data({})`
- **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö** –∏–∑ —Å–æ–±—ã—Ç–∏—è (user_id, callback_data)

> **–í–∞–∂–Ω–æ:** Trigger —Ç–æ–ª—å–∫–æ **—Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç** —Å–æ—Å—Ç–æ—è–Ω–∏—è, –Ω–æ –ù–ï —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –Ω–æ–≤—ã–µ!

#### ‚ùå –ß—Ç–æ –ù–ï –¥–µ–ª–∞–µ—Ç Trigger

- ‚ùå –ó–∞–ø—Ä–æ—Å—ã –∫ –ë–î
- ‚ùå –í—ã–∑–æ–≤—ã —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚ùå –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- ‚ùå –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚ùå –í—ã—á–∏—Å–ª–µ–Ω–∏—è

#### üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Trigger

```python
class SomeTrigger:
    async def run(self, event, state) -> dict:
        """
        –í—ã–ø–æ–ª–Ω–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏.
        
        Args:
            event: Message –∏–ª–∏ CallbackQuery –æ—Ç Telegram
            state: FSM –∫–æ–Ω—Ç–µ–∫—Å—Ç
            
        Returns:
            dict: –î–∞–Ω–Ω—ã–µ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≤ Code
        """
        # –í–∏–∑—É–∞–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
        # ...
        
        return {
            "telegram_id": int,
            "event": event,
            # ... –¥—Ä—É–≥–∏–µ –±–∞–∑–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
        }
```

#### üìã –®–∞–±–ª–æ–Ω Trigger

```python
"""
Trigger –¥–ª—è {–æ–ø–∏—Å–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è}.

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –≤–∏–¥–∂–µ—Ç–∞—Ö:
- handler/v1/user/{tag}/{widget}_widget.py
"""

from aiogram.types import Message, CallbackQuery
from aiogram.fsm.context import FSMContext
import service

class {Name}Trigger:
    """
    Trigger –¥–ª—è {–æ–ø–∏—Å–∞–Ω–∏–µ}.
    
    –í—ã–ø–æ–ª–Ω—è–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:
    - {–æ–ø–µ—Ä–∞—Ü–∏—è 1}
    - {–æ–ø–µ—Ä–∞—Ü–∏—è 2}
    - {–æ–ø–µ—Ä–∞—Ü–∏—è 3}
    """
    
    async def run(self, event: Message | CallbackQuery, state: FSMContext):
        """
        –í—ã–ø–æ–ª–Ω–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏.
        
        Args:
            event: Message –∏–ª–∏ CallbackQuery —Å–æ–±—ã—Ç–∏–µ –æ—Ç Telegram
            state: FSM –∫–æ–Ω—Ç–µ–∫—Å—Ç
            
        Returns:
            dict: –î–∞–Ω–Ω—ã–µ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≤ Code
            {
                "telegram_id": int,
                "event": Message | CallbackQuery,
                # ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
            }
        """
        # –£–¥–∞–ª—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
        telegram_id = event.from_user.id
        msgs_ids = await service.db_serv.get_user_messages(telegram_id)
        await service.message_serv.delete_messages(msgs_ids, telegram_id)
        await service.db_serv.delete_user_messages(telegram_id)
        
        # –°–±—Ä–∞—Å—ã–≤–∞–µ–º FSM (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
        await state.set_state(None)
        await state.set_data({})
        
        return {
            "telegram_id": telegram_id,
            "event": event
        }
```

#### üìñ –ü—Ä–∞–≤–∏–ª–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Trigger

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∑–∞—Ç—å:**
1. **–í docstring –º–æ–¥—É–ª—è:**
   - –û–ø–∏—Å–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è Trigger
   - –°–ø–∏—Å–æ–∫ –≤–∏–¥–∂–µ—Ç–æ–≤ –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
2. **–í docstring –∫–ª–∞—Å—Å–∞:**
   - –°–ø–∏—Å–æ–∫ –≤—ã–ø–æ–ª–Ω—è–µ–º—ã—Ö –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
3. **–í docstring –º–µ—Ç–æ–¥–∞ run():**
   - Args —Å —Ç–∏–ø–∞–º–∏
   - Returns —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤—Å–µ—Ö –ø–æ–ª–µ–π

---

### Code - –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

#### üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
Code –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ **–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏** –∏ **–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–∞–∫–æ–π Answer –ø–æ–∫–∞–∑–∞—Ç—å**. –≠—Ç–æ —Å–µ—Ä–¥—Ü–µ –≤–∏–¥–∂–µ—Ç–∞, —Å–æ–¥–µ—Ä–∂–∞—â–µ–µ –≤—Å—é –ª–æ–≥–∏–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏.

#### ‚úÖ –û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ Code

- **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** –∏–∑ trigger_data –∏ FSM
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**
- **–í—ã–∑–æ–≤—ã —Å–µ—Ä–≤–∏—Å–æ–≤** (–ë–î, API, ML, email –∏ —Ç.–¥.)
- **–í—ã—á–∏—Å–ª–µ–Ω–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö**
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª**
- **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ FSM —Å–æ—Å—Ç–æ—è–Ω–∏–π**: `await state.set_state(SomeState.waiting_input)`
- **–ó–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö –≤ FSM**: `await state.update_data(...)`
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞** (–∫–∞–∫–æ–π Answer –ø–æ–∫–∞–∑–∞—Ç—å)

> **–í–∞–∂–Ω–æ:** –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤–æ–≥–æ FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è ‚Äî —ç—Ç–æ **–±–∏–∑–Ω–µ—Å-—Ä–µ—à–µ–Ω–∏–µ**, –ø–æ—ç—Ç–æ–º—É –¥–µ–ª–∞–µ—Ç—Å—è –≤ Code!

#### üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Code

```python
class SomeCode:
    async def run(self, trigger_data, state, **kwargs) -> dict:
        """–ì–ª–∞–≤–Ω—ã–π –º–µ—Ç–æ–¥."""
        result = await self._execute_business_logic(...)
        return await self._route_to_answer(result)
    
    async def _execute_business_logic(self, ...) -> dict:
        """–í—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Å—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É."""
        # –í—Å—è –ª–æ–≥–∏–∫–∞ –∑–¥–µ—Å—å
        pass
    
    async def _route_to_answer(self, result: dict) -> dict:
        """–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–∞–∫–æ–π Answer –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å."""
        if condition1:
            return {"answer_name": "state1", "data": result}
        if condition2:
            return {"answer_name": "state2", "data": result}
        return {"answer_name": "default", "data": result}
```

#### üìã –®–∞–±–ª–æ–Ω Code

```python
"""
Code –¥–ª—è {–æ–ø–∏—Å–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è}.

–ó–∞–¥–∞—á–∞: {–ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏}.

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –≤–∏–¥–∂–µ—Ç–∞—Ö:
- handler/v1/user/{tag}/{widget}_widget.py
"""

from aiogram.fsm.context import FSMContext
import service

class {Name}Code:
    """
    –ö–ª–∞—Å—Å –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ {–æ–ø–∏—Å–∞–Ω–∏–µ}.
    
    ‚ö†Ô∏è –í–ê–ñ–ù–û: {–∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —á—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞}
    
    –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞:
    1. {—à–∞–≥ 1}
    2. {—à–∞–≥ 2}
    3. {—à–∞–≥ 3}
    4. {—à–∞–≥ 4}
    5. {—à–∞–≥ 5}
    
    –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã:
    - service.{service_name}.{method}() - {–æ–ø–∏—Å–∞–Ω–∏–µ}
    - service.{service_name}.{method}() - {–æ–ø–∏—Å–∞–Ω–∏–µ}
    
    –£—Å–ª–æ–≤–∏—è —Ä–æ—É—Ç–∏–Ω–≥–∞ –∫ Answer:
    - {—É—Å–ª–æ–≤–∏–µ 1} ‚Üí "{answer_name_1}" ({AnswerClassName1})
    - {—É—Å–ª–æ–≤–∏–µ 2} ‚Üí "{answer_name_2}" ({AnswerClassName2})
    - –∏–Ω–∞—á–µ ‚Üí "{default}" ({DefaultAnswerClass})
    """
    
    async def run(self, trigger_data: dict, state: FSMContext, **kwargs):
        """
        –í—ã–ø–æ–ª–Ω–∏—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –∏ –≤—ã–±—Ä–∞—Ç—å Answer.
        
        –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞:
        1. {–¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —à–∞–≥–∞ 1}
        2. {–¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —à–∞–≥–∞ 2}
        3. {–¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —à–∞–≥–∞ 3}
        
        Args:
            trigger_data: –î–∞–Ω–Ω—ã–µ –æ—Ç Trigger
            {
                "telegram_id": int - –æ–ø–∏—Å–∞–Ω–∏–µ,
                "event": Message | CallbackQuery - –æ–ø–∏—Å–∞–Ω–∏–µ,
                # ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
            }
            state: FSM –∫–æ–Ω—Ç–µ–∫—Å—Ç
            **kwargs: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
            {
                "param1": type - –æ–ø–∏—Å–∞–Ω–∏–µ (–µ—Å–ª–∏ –µ—Å—Ç—å)
            }
            
        Returns:
            dict: –ù–∞–∑–≤–∞–Ω–∏–µ Answer + –¥–∞–Ω–Ω—ã–µ –¥–ª—è –Ω–µ–≥–æ
            {
                "answer_name": str,  # –ù–∞–∑–≤–∞–Ω–∏–µ Answer
                "data": dict         # –î–∞–Ω–Ω—ã–µ –¥–ª—è Answer
            }
        """
        # –í—ã–ø–æ–ª–Ω—è–µ–º –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É
        result = await self._execute_business_logic(trigger_data, state, **kwargs)
        
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–∞–∫–æ–π Answer –Ω—É–∂–µ–Ω
        return await self._route_to_answer(result)
    
    async def _execute_business_logic(
        self, 
        trigger_data: dict, 
        state: FSMContext,
        **kwargs
    ) -> dict:
        """
        –í—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Å—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É.
        
        –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞:
        1. {–ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞}
        2. {—á—Ç–æ –¥–µ–ª–∞–µ–º}
        3. {–∫–∞–∫–∏–µ —Å–µ—Ä–≤–∏—Å—ã –≤—ã–∑—ã–≤–∞–µ–º}
        4. {—á—Ç–æ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ FSM}
        
        Returns:
            dict: –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ –≤—Å–µ–º–∏ –¥–∞–Ω–Ω—ã–º–∏
            {
                "field1": type - –æ–ø–∏—Å–∞–Ω–∏–µ,
                "field2": type - –æ–ø–∏—Å–∞–Ω–∏–µ,
                # ...
            }
        """
        telegram_id = trigger_data["telegram_id"]
        
        # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∑–¥–µ—Å—å
        # ...
        
        return {
            "telegram_id": telegram_id,
            # ... —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏
        }
    
    async def _route_to_answer(self, result: dict) -> dict:
        """
        –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–∞–∫–æ–π Answer –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.
        
        –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —É—Å–ª–æ–≤–∏—è –∏ –≤—ã–±–∏—Ä–∞–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏–π Answer.
        
        Args:
            result: –†–µ–∑—É–ª—å—Ç–∞—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
            
        Returns:
            dict: –ù–∞–∑–≤–∞–Ω–∏–µ Answer + –¥–∞–Ω–Ω—ã–µ
        """
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å–ª–æ–≤–∏—è
        if result.get("condition1"):
            return {"answer_name": "state1", "data": result}
        
        if result.get("condition2"):
            return {"answer_name": "state2", "data": result}
        
        return {"answer_name": "default", "data": result}
```

#### üìñ –ü—Ä–∞–≤–∏–ª–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Code

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∑–∞—Ç—å:**
1. **–í docstring –º–æ–¥—É–ª—è:**
   - –ó–∞–¥–∞—á–∞ Code (—á—Ç–æ –∑–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
   - –°–ø–∏—Å–æ–∫ –≤–∏–¥–∂–µ—Ç–æ–≤ –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
2. **–í docstring –∫–ª–∞—Å—Å–∞:**
   - –ü–æ–¥—Ä–æ–±–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (–ø–æ—à–∞–≥–æ–≤–æ)
   - –í–°–ï –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã
   - –í–°–ï —É—Å–ª–æ–≤–∏—è —Ä–æ—É—Ç–∏–Ω–≥–∞ –∫ Answer
3. **–í docstring –º–µ—Ç–æ–¥–∞ run():**
   - –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
   - Args —Å —Ç–∏–ø–∞–º–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ–º –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—è
   - Returns —Å —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –¥–∞–Ω–Ω—ã—Ö
4. **–í docstring –º–µ—Ç–æ–¥–∞ _execute_business_logic():**
   - –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏
   - Returns —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤—Å–µ—Ö –ø–æ–ª–µ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
5. **–í docstring –º–µ—Ç–æ–¥–∞ _route_to_answer():**
   - –û–ø–∏—Å–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —Ä–æ—É—Ç–∏–Ω–≥–∞

---

### Answer - –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —ç–∫—Ä–∞–Ω–æ–≤

#### üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
Answer –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ **—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–∫—É UI —ç–∫—Ä–∞–Ω–∞** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é. –û–¥–∏–Ω Answer = –æ–¥–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞.

#### ‚úÖ –û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ Answer

- **–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è** (—Å –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–æ–π –¥–∞–Ω–Ω—ã—Ö)
- **–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä** (inline, reply)
- **–û—Ç–ø—Ä–∞–≤–∫–∞ –º–µ–¥–∏–∞** (—Ñ–æ—Ç–æ, –≤–∏–¥–µ–æ, —Å—Ç–∏–∫–µ—Ä—ã, –¥–æ–∫—É–º–µ–Ω—Ç—ã)
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ ID –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π** (–¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è)
- **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –ª–µ–≥–∫–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞** (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –º–µ—Ç—Ä–∏–∫–∏, UI-–≤—ã—á–∏—Å–ª–µ–Ω–∏—è)

> **–í–∞–∂–Ω–æ:** Answer –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç —Å FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ - —Ç–æ–ª—å–∫–æ —Ä–∏—Å—É–µ—Ç UI!

#### üí° –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å Answer

Answer **–ú–û–ñ–ï–¢** —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–≤–æ—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É, –Ω–æ —Ç–æ–ª—å–∫–æ —Å–≤—è–∑–∞–Ω–Ω—É—é —Å UI:
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –ø–æ–∫–∞–∑–∞ —ç–∫—Ä–∞–Ω–∞
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –º–µ—Ç—Ä–∏–∫ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- ‚úÖ –õ–µ–≥–∫–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø–æ–¥—Å—á–µ—Ç)
- ‚ùå –ù–ï –¥–æ–ª–∂–µ–Ω –¥–µ–ª–∞—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ –±–∏–∑–Ω–µ—Å-–∑–∞–ø—Ä–æ—Å—ã (—ç—Ç–æ –∑–∞–¥–∞—á–∞ Code)

#### üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Answer

```python
class SomeAnswer:
    async def run(self, event, user_lang: str, data: dict, **kwargs):
        """–û—Ç—Ä–∏—Å–æ–≤–∞—Ç—å —ç–∫—Ä–∞–Ω."""
        # –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç
        text = self._build_text(data, user_lang)
        
        # –§–æ—Ä–º–∏—Ä—É–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
        keyboard = self._build_keyboard(data, user_lang, **kwargs)
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º
        msg = await event.message.answer(text=text, reply_markup=keyboard)
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º ID —Å–æ–æ–±—â–µ–Ω–∏–π
        await service.db_serv.create_messages(data["telegram_id"], [msg.message_id])
    
    def _build_text(self, data: dict, user_lang: str) -> str:
        """–ü–æ—Å—Ç—Ä–æ–∏—Ç—å —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è."""
        pass
    
    def _build_keyboard(self, data: dict, user_lang: str, **kwargs):
        """–ü–æ—Å—Ç—Ä–æ–∏—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É."""
        pass
```

#### üìã –®–∞–±–ª–æ–Ω Answer

```python
"""
Answer: {–ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —ç–∫—Ä–∞–Ω–∞}.

–°–æ—Å—Ç–æ—è–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞: {–û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è}.
–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ: {–ß—Ç–æ –≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å}.

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –≤–∏–¥–∂–µ—Ç–∞—Ö:
- handler/v1/user/{tag}/{widget1}_widget.py ({—É—Å–ª–æ–≤–∏–µ})
- handler/v1/user/{tag}/{widget2}_widget.py ({—É—Å–ª–æ–≤–∏–µ})
"""

from aiogram.types import Message, CallbackQuery, InlineKeyboardMarkup, InlineKeyboardButton
from aiogram.utils.keyboard import InlineKeyboardBuilder
from core.vocab import MESSAGES, BUTTONS
from callback.user.{tag} import {SomeCallback}
import service

class {Name}Answer:
    """
    Answer –¥–ª—è {–æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —ç–∫—Ä–∞–Ω–∞}.
    
    –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ Answer (–µ—Å–ª–∏ –µ—Å—Ç—å):
    1. {—à–∞–≥ 1 - –Ω–∞–ø—Ä–∏–º–µ—Ä, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ}
    2. {—à–∞–≥ 2 - –Ω–∞–ø—Ä–∏–º–µ—Ä, –º–µ—Ç—Ä–∏–∫–∏}
    
    –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã (–µ—Å–ª–∏ –µ—Å—Ç—å):
    - service.{service}.{method}() - {–æ–ø–∏—Å–∞–Ω–∏–µ}
    
    –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ–∫—Å—Ç—ã:
    - MESSAGES["{key}"] - {–æ–ø–∏—Å–∞–Ω–∏–µ}
    - BUTTONS["{key}"] - {–æ–ø–∏—Å–∞–Ω–∏–µ}
    
    –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–ª–±–µ–∫–∏:
    - {CallbackName} - {–æ–ø–∏—Å–∞–Ω–∏–µ}
    """
    
    async def run(
        self,
        event: Message | CallbackQuery,
        user_lang: str,
        data: dict,
        **kwargs
    ):
        """
        –û—Ç—Ä–∏—Å–æ–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞.
        
        Args:
            event: Message –∏–ª–∏ CallbackQuery –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞
            user_lang: –Ø–∑—ã–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            data: –î–∞–Ω–Ω—ã–µ –æ—Ç Code
            {
                "telegram_id": int - –æ–ø–∏—Å–∞–Ω–∏–µ,
                "field1": type - –æ–ø–∏—Å–∞–Ω–∏–µ,
                # ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
            }
            **kwargs: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
            {
                "text_override": str (optional) - –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–µ–∫—Å—Ç
                "show_back_button": bool (optional) - –ø–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥"
                # ... –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
            }
        """
        telegram_id = data["telegram_id"]
        
        # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ Answer (–µ—Å–ª–∏ –µ—Å—Ç—å)
        # –ù–∞–ø—Ä–∏–º–µ—Ä: –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –º–µ—Ç—Ä–∏–∫–∏
        
        # –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç
        text = kwargs.get("text_override") or self._build_text(data, user_lang)
        
        # –§–æ—Ä–º–∏—Ä—É–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
        keyboard = self._build_keyboard(data, user_lang, **kwargs)
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º
        message_obj = event if isinstance(event, Message) else event.message
        msg = await message_obj.answer(text=text, reply_markup=keyboard)
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º ID —Å–æ–æ–±—â–µ–Ω–∏–π
        await service.db_serv.create_messages(telegram_id, [msg.message_id])
    
    def _build_text(self, data: dict, user_lang: str) -> str:
        """
        –ü–æ—Å—Ç—Ä–æ–∏—Ç—å —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è.
        
        Args:
            data: –î–∞–Ω–Ω—ã–µ –æ—Ç Code
            user_lang: –Ø–∑—ã–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            
        Returns:
            str: –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
        """
        # –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
        return MESSAGES["{key}"][user_lang].format(**data)
    
    def _build_keyboard(
        self, 
        data: dict, 
        user_lang: str,
        **kwargs
    ) -> InlineKeyboardMarkup:
        """
        –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É.
        
        Args:
            data: –î–∞–Ω–Ω—ã–µ –æ—Ç Code
            user_lang: –Ø–∑—ã–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            **kwargs: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
            
        Returns:
            InlineKeyboardMarkup: –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞
        """
        builder = InlineKeyboardBuilder()
        
        # –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
        builder.button(
            text=BUTTONS["{key}"][user_lang],
            callback_data={SomeCallback}().pack()
        )
        
        return builder.as_markup()
```

#### üìñ –ü—Ä–∞–≤–∏–ª–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Answer

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∑–∞—Ç—å:**
1. **–í docstring –º–æ–¥—É–ª—è:**
   - –ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —ç–∫—Ä–∞–Ω–∞
   - –ö–æ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
   - –ß—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
   - **–°–ø–∏—Å–æ–∫ –≤–∏–¥–∂–µ—Ç–æ–≤ –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è** (–≤–∞–∂–Ω–æ!)
2. **–í docstring –∫–ª–∞—Å—Å–∞:**
   - –û–ø–∏—Å–∞–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞
   - –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ Answer (–µ—Å–ª–∏ –µ—Å—Ç—å)
   - –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)
   - –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ–∫—Å—Ç—ã (MESSAGES, BUTTONS)
   - –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–ª–±–µ–∫–∏
3. **–í docstring –º–µ—Ç–æ–¥–∞ run():**
   - Args —Å —Ç–∏–ø–∞–º–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤—Å–µ—Ö –ø–æ–ª–µ–π data –∏ kwargs
   - –û–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –º–µ—Ç–æ–¥–∞
4. **–í docstring –º–µ—Ç–æ–¥–æ–≤ _build_*():**
   - Args –∏ Returns
   - –û–ø–∏—Å–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è

---

### üîÑ –†–∞–±–æ—Ç–∞ —Å FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ - –ø–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä

#### –¢–∏–ø–∏—á–Ω—ã–π Flow –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏—è

```python
# 1Ô∏è‚É£ Trigger - —Å–±—Ä–æ—Å —Å—Ç–∞—Ä–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
class StartVacancyCreationTrigger:
    async def run(self, event, state):
        telegram_id = event.from_user.id
        
        # –£–¥–∞–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è
        msgs_ids = await service.db_serv.get_user_messages(telegram_id)
        await service.message_serv.delete_messages(msgs_ids, telegram_id)
        await service.db_serv.delete_user_messages(telegram_id)
        
        # –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—Ç–∞—Ä–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        await state.set_state(None)
        await state.set_data({})
        
        return {
            "telegram_id": telegram_id,
            "event": event
        }

# 2Ô∏è‚É£ Code - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
class StartVacancyCreationCode:
    async def _execute_business_logic(self, trigger_data, state, **kwargs):
        telegram_id = trigger_data["telegram_id"]
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–∞
        user = await service.db_serv.get_user(telegram_id)
        if not user.can_create_vacancy:
            return {"error": "no_permission"}
        
        # –°–æ–∑–¥–∞–µ–º –∑–∞–≥–æ—Ç–æ–≤–∫—É –≤–∞–∫–∞–Ω—Å–∏–∏
        vacancy_id = await service.db_serv.create_vacancy_draft(telegram_id)
        
        # ‚úÖ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ - –±–∏–∑–Ω–µ—Å-—Ä–µ—à–µ–Ω–∏–µ!
        await state.set_state(VacancyState.waiting_name)
        await state.update_data(vacancy_id=vacancy_id)
        
        return {
            "telegram_id": telegram_id,
            "vacancy_id": vacancy_id
        }
    
    async def _route_to_answer(self, result):
        if result.get("error"):
            return {"answer_name": "error", "data": result}
        return {"answer_name": "ask_name", "data": result}

# 3Ô∏è‚É£ Answer - —Ç–æ–ª—å–∫–æ –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ UI
class AskVacancyNameAnswer:
    async def run(self, event, user_lang, data, **kwargs):
        telegram_id = data["telegram_id"]
        
        # –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç
        text = MESSAGES["ask_vacancy_name"][user_lang]
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
        message_obj = event if isinstance(event, Message) else event.message
        msg = await message_obj.answer(text=text)
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º ID —Å–æ–æ–±—â–µ–Ω–∏—è
        await service.db_serv.create_messages(telegram_id, [msg.message_id])
```

#### –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –†–∞–±–æ—Ç–∞ —Å FSM | –ü—Ä–∏–º–µ—Ä |
|-----------|--------------|--------|
| **Trigger** | –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏–π | `await state.set_state(None)` |
| **Code** | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π | `await state.set_state(VacancyState.waiting_name)` |
| **Answer** | –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å FSM | ‚Äî |

---

## –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### üéØ –ö–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π?

**–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ node/ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã.**

–î–∞–∂–µ –µ—Å–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–µ–π—á–∞—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –æ–¥–Ω–æ–º –≤–∏–¥–∂–µ—Ç–µ, –æ–Ω –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –≤ –¥—Ä—É–≥–∏—Ö –ø–æ–∑–∂–µ. –ü–æ—ç—Ç–æ–º—É –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è –≤ `node/`.

### üìù –ü—Ä–∏–º–µ—Ä—ã –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –ü—Ä–∏–º–µ—Ä 1: VacancyListAnswer

```python
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ç—Ä–µ—Ö –≤–∏–¥–∂–µ—Ç–∞—Ö:

# 1. handler/v1/user/control/start_command_widget.py
from node.control.answer.vacancy_list_answer import VacancyListAnswer

answer = VacancyListAnswer()
await answer.run(message, user_lang, data)

# 2. handler/v1/user/vacancy/list_widget.py
from node.control.answer.vacancy_list_answer import VacancyListAnswer

answer = VacancyListAnswer()
await answer.run(message, user_lang, data, show_back_button=True)

# 3. handler/v1/user/vacancy/screening_widget.py
from node.control.answer.vacancy_list_answer import VacancyListAnswer

answer = VacancyListAnswer()
await answer.run(
    message, 
    user_lang, 
    data, 
    text_override="–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞–∫–∞–Ω—Å–∏—é –¥–ª—è —Å–∫—Ä–∏–Ω–∏–Ω–≥–∞:"
)
```

#### –ü—Ä–∏–º–µ—Ä 2: ClearMessagesTrigger (–æ–±—â–∏–π Trigger)

```python
# node/common/trigger/clear_messages_trigger.py

class ClearMessagesTrigger:
    """–û–±—â–∏–π Trigger –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π."""
    
    async def run(self, event, state):
        telegram_id = event.from_user.id
        msgs_ids = await service.db_serv.get_user_messages(telegram_id)
        await service.message_serv.delete_messages(msgs_ids, telegram_id)
        await service.db_serv.delete_user_messages(telegram_id)
        
        return {"telegram_id": telegram_id, "event": event}

# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ú–ù–û–ñ–ï–°–¢–í–ï –≤–∏–¥–∂–µ—Ç–æ–≤
```

### üîß –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ kwargs

Answer –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏:

```python
class VacancyListAnswer:
    async def run(self, event, user_lang, data, **kwargs):
        # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
        text_override = kwargs.get("text_override")  # –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–µ–∫—Å—Ç
        show_back_button = kwargs.get("show_back_button", False)  # –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥"
        items_per_page = kwargs.get("items_per_page", 5)  # –≠–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
        custom_callback = kwargs.get("custom_callback")  # –°–≤–æ–π –∫–æ–ª–±–µ–∫
        
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–∏ UI
```

**–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç:**
- ‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Answer —Å —Ä–∞–∑–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- ‚úÖ –ù–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è—Ç—å –≥–∏–±–∫–æ—Å—Ç—å

### üîç –ö–∞–∫ –Ω–∞–π—Ç–∏ –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç?

**Grep/–ø–æ–∏—Å–∫ –ø–æ –ø—Ä–æ–µ–∫—Ç—É:**
```bash
# –ù–∞–π—Ç–∏ –≤—Å–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è VacancyListAnswer
grep -r "VacancyListAnswer" handler/
```

**–ò–ª–∏ —Å–º–æ—Ç—Ä–∏–º –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:**
```python
"""
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –≤–∏–¥–∂–µ—Ç–∞—Ö:
- handler/v1/user/control/start_command_widget.py
- handler/v1/user/vacancy/list_widget.py
- handler/v1/user/vacancy/screening_widget.py
"""
```

---

## –ß–µ–∫-–ª–∏—Å—Ç—ã

### ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ Trigger

- [ ] **–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–µ–≥** –∫ –∫–æ—Ç–æ—Ä–æ–º—É –æ—Ç–Ω–æ—Å–∏—Ç—Å—è Trigger
- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏** `node/{tag}/trigger/`
- [ ] **–ï—Å–ª–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –Ω–µ—Ç** - —Å–æ–∑–¥–∞—Ç—å `node/{tag}/trigger/`
- [ ] **–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª** `{action}_trigger.py`
- [ ] **–°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å** `{Action}Trigger`
- [ ] **–í docstring –º–æ–¥—É–ª—è:**
  - [ ] –û–ø–∏—Å–∞—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ Trigger
  - [ ] –£–∫–∞–∑–∞—Ç—å –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (—Å–ø–∏—Å–æ–∫ –≤–∏–¥–∂–µ—Ç–æ–≤)
- [ ] **–í docstring –∫–ª–∞—Å—Å–∞:**
  - [ ] –û–ø–∏—Å–∞—Ç—å —á—Ç–æ –¥–µ–ª–∞–µ—Ç
  - [ ] –ü–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å –≤—Å–µ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- [ ] **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ run():**
  - [ ] –í–∏–∑—É–∞–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (—É–¥–∞–ª–µ–Ω–∏–µ, —Å—Ç–∏–∫–µ—Ä—ã, FSM)
  - [ ] –í–æ–∑–≤—Ä–∞—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è Code
- [ ] **–í docstring run():**
  - [ ] –û–ø–∏—Å–∞—Ç—å Args —Å —Ç–∏–ø–∞–º–∏
  - [ ] –û–ø–∏—Å–∞—Ç—å Returns —Å –ø–æ–ª—è–º–∏
- [ ] **–ù–µ –¥–æ–±–∞–≤–ª—è—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É** - —Ç–æ–ª—å–∫–æ –≤–∏–∑—É–∞–ª!

---

### ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ Code

- [ ] **–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–µ–≥** –∫ –∫–æ—Ç–æ—Ä–æ–º—É –æ—Ç–Ω–æ—Å–∏—Ç—Å—è Code
- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏** `node/{tag}/code/`
- [ ] **–ï—Å–ª–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –Ω–µ—Ç** - —Å–æ–∑–¥–∞—Ç—å `node/{tag}/code/`
- [ ] **–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª** `{action}_code.py`
- [ ] **–°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å** `{Action}Code`
- [ ] **–í docstring –º–æ–¥—É–ª—è:**
  - [ ] –û–ø–∏—Å–∞—Ç—å –∑–∞–¥–∞—á—É (—á—Ç–æ –∑–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
  - [ ] –£–∫–∞–∑–∞—Ç—å –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (—Å–ø–∏—Å–æ–∫ –≤–∏–¥–∂–µ—Ç–æ–≤)
- [ ] **–í docstring –∫–ª–∞—Å—Å–∞:**
  - [ ] –û–ø–∏—Å–∞—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –ø–æ—à–∞–≥–æ–≤–æ (–Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫)
  - [ ] –ü–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å –í–°–ï –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã
  - [ ] –û–ø–∏—Å–∞—Ç—å –í–°–ï —É—Å–ª–æ–≤–∏—è —Ä–æ—É—Ç–∏–Ω–≥–∞ –∫ Answer
- [ ] **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ run():**
  - [ ] –í—ã–∑–æ–≤ _execute_business_logic()
  - [ ] –í—ã–∑–æ–≤ _route_to_answer()
  - [ ] –í–æ–∑–≤—Ä–∞—Ç {"answer_name": str, "data": dict}
- [ ] **–í docstring run():**
  - [ ] –û–ø–∏—Å–∞—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –¥–µ—Ç–∞–ª—å–Ω–æ
  - [ ] Args —Å —Ç–∏–ø–∞–º–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ–º –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—è
  - [ ] Returns —Å —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- [ ] **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ _execute_business_logic():**
  - [ ] –í—Å—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
  - [ ] –í—ã–∑–æ–≤—ã —Å–µ—Ä–≤–∏—Å–æ–≤
  - [ ] –ó–∞–ø–∏—Å—å –≤ FSM (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
  - [ ] –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
- [ ] **–í docstring _execute_business_logic():**
  - [ ] –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏
  - [ ] Returns —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤—Å–µ—Ö –ø–æ–ª–µ–π
- [ ] **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ _route_to_answer():**
  - [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏–π
  - [ ] –í–æ–∑–≤—Ä–∞—Ç answer_name + data
- [ ] **–í docstring _route_to_answer():**
  - [ ] –û–ø–∏—Å–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —Ä–æ—É—Ç–∏–Ω–≥–∞

---

### ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ Answer

- [ ] **–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–µ–≥** –∫ –∫–æ—Ç–æ—Ä–æ–º—É –æ—Ç–Ω–æ—Å–∏—Ç—Å—è Answer
- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏** `node/{tag}/answer/`
- [ ] **–ï—Å–ª–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –Ω–µ—Ç** - —Å–æ–∑–¥–∞—Ç—å `node/{tag}/answer/`
- [ ] **–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª** `{state}_answer.py`
- [ ] **–°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å** `{State}Answer`
- [ ] **–í docstring –º–æ–¥—É–ª—è:**
  - [ ] –ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —ç–∫—Ä–∞–Ω–∞
  - [ ] –ö–æ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
  - [ ] –ß—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
  - [ ] **–°–ø–∏—Å–æ–∫ –≤–∏–¥–∂–µ—Ç–æ–≤ –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!)
- [ ] **–í docstring –∫–ª–∞—Å—Å–∞:**
  - [ ] –û–ø–∏—Å–∞–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞
  - [ ] –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ Answer (–µ—Å–ª–∏ –µ—Å—Ç—å)
  - [ ] –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)
  - [ ] –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ–∫—Å—Ç—ã (MESSAGES, BUTTONS)
  - [ ] –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–ª–±–µ–∫–∏
- [ ] **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ run():**
  - [ ] –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ Answer (–ª–æ–≥–∏, –º–µ—Ç—Ä–∏–∫–∏)
  - [ ] –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
  - [ ] –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
  - [ ] –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
  - [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ ID —Å–æ–æ–±—â–µ–Ω–∏–π
- [ ] **–í docstring run():**
  - [ ] Args —Å —Ç–∏–ø–∞–º–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ–º data –∏ kwargs
  - [ ] –û–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã
- [ ] **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã _build_*():**
  - [ ] _build_text() - –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
  - [ ] _build_keyboard() - –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
  - [ ] –î—Ä—É–≥–∏–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã
- [ ] **–í docstring _build_*():**
  - [ ] Args –∏ Returns
  - [ ] –û–ø–∏—Å–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏
- [ ] **–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ kwargs:**
  - [ ] text_override
  - [ ] show_back_button
  - [ ] –î—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

---

### üìã –®–∞–±–ª–æ–Ω—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

–ü–æ–ª–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã —Å–º. –≤ —Ä–∞–∑–¥–µ–ª–∞—Ö –≤—ã—à–µ:
- [–®–∞–±–ª–æ–Ω Trigger](#üìã-—à–∞–±–ª–æ–Ω-trigger)
- [–®–∞–±–ª–æ–Ω Code](#üìã-—à–∞–±–ª–æ–Ω-code)
- [–®–∞–±–ª–æ–Ω Answer](#üìã-—à–∞–±–ª–æ–Ω-answer)

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü–∞–∫–µ—Ç `node` - —ç—Ç–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–π:
- üîÑ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- üéØ –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- üß© LEGO-–ø–æ–¥—Ö–æ–¥ –∫ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—é –≤–∏–¥–∂–µ—Ç–æ–≤
- üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞

**–ü—Ä–∞–≤–∏–ª–æ:** –í—Å–µ UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∂–∏–≤—É—Ç –≤ `node/`, –≤–∏–¥–∂–µ—Ç—ã –≤ `handler/` —Ç–æ–ª—å–∫–æ –æ—Ä–∫–µ—Å—Ç—Ä–∏—Ä—É—é—Ç –∏—Ö —Ä–∞–±–æ—Ç—É.

