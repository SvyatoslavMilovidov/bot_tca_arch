# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã HR Bot

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [üåü –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã](#-–æ–±–∑–æ—Ä-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã)
2. [üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –ø–∞–∫–µ—Ç–∞–º](#-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è-–ø–æ-–ø–∞–∫–µ—Ç–∞–º)
3. [üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
4. [üìñ –°–æ–≥–ª–∞—à–µ–Ω–∏—è –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã](#-—Å–æ–≥–ª–∞—à–µ–Ω–∏—è-–∏-—Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã)

## üåü –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

HR Bot –ø–æ—Å—Ç—Ä–æ–µ–Ω –ø–æ –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Å —á–µ—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏:

```
bot_refactor/
‚îú‚îÄ‚îÄ node/          # UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Trigger, Code, Answer) –ø–æ —Ç–µ–≥–∞–º
‚îú‚îÄ‚îÄ handler/       # –í–∏–¥–∂–µ—Ç—ã-–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä—ã, —Å–æ–±–∏—Ä–∞—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ webhook/       # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ webhook –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
‚îú‚îÄ‚îÄ core/          # –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ data/          # –§–∞–π–ª—ã –∏ –±—É—Ñ–µ—Ä—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã
‚îú‚îÄ‚îÄ callback/      # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–ª–±–µ–∫–æ–≤, –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ —Ç–µ–≥–∞–º
‚îú‚îÄ‚îÄ state/         # –°–æ—Å—Ç–æ—è–Ω–∏—è FSM, –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ —Ç–µ–≥–∞–º
‚îî‚îÄ‚îÄ service/       # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω–∞—è –ø–æ –¥–æ–º–µ–Ω–∞–º
```

### üè∑Ô∏è –°–∏—Å—Ç–µ–º–∞ —Ç–µ–≥–æ–≤

–ö–ª—é—á–µ–≤–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã - **—Ç–µ–≥–∏**. –û–Ω–∏ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –≥—Ä—É–ø–ø—ã:

- **–¢–µ–≥** - —ç—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `onboarding`, `payment`, `analytics`)
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º —Ç–µ–≥–æ–º –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –≤ –æ–¥–∏–Ω –º–æ–¥—É–ª—å
- –≠—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏—é –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É –∫–æ–¥–∞

–î–æ–ø—É—Å–∫–∞–µ—Ç—Å—è **–≤–ª–æ–∂–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–Ω—É—Ç—Ä–∏ —Ç–µ–≥–∞** (–≤ `handler/`) –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –≤–∏–¥–∂–µ—Ç–æ–≤ –ø–æ –ø–æ–¥—Å–µ–∫—Ü–∏—è–º/—Å—Ü–µ–Ω–∞—Ä–∏—è–º. –ü—Ä–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –≤–∏–¥–∂–µ—Ç–æ–≤ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ —Ñ–∞–π–ª–∞–º.

### üìã –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–æ —Ç–µ–≥–∞–º

```python
# –¢–µ–≥: onboarding
callback/onboarding.py      # SetCompanyNameCallback, SetCompanyDescriptionCallback
state/onboarding.py         # wait_company_name, wait_company_description

# –¢–µ–≥: payment  
callback/payment.py         # ProcessPaymentCallback, RefundCallback
state/payment.py           # wait_payment_data, processing_payment
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –ø–∞–∫–µ—Ç–∞–º

| –ü–∞–∫–µ—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è |
|-------|----------|--------------|
| **node** | UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Trigger, Code, Answer) –ø–æ —Ç–µ–≥–∞–º | [üìñ node.md](node.md) |
| **handler** | –í–∏–¥–∂–µ—Ç—ã-–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä—ã, —Å–æ–±–∏—Ä–∞—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–∑ node | [üìñ handler.md](handler.md) |
| **webhook** | –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ webhook –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ | [üìñ webhook.md](webhook.md) |
| **core** | –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, —Å–ª–æ–≤–∞—Ä–∏ | [üìñ core.md](core.md) |
| **data** | –§–∞–π–ª—ã –∏ –±—É—Ñ–µ—Ä—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è | [üìñ data.md](data.md) |
| **callback** | –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–ª–±–µ–∫–æ–≤, –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ —Ç–µ–≥–∞–º | [üìñ callback.md](callback.md) |
| **state** | –°–æ—Å—Ç–æ—è–Ω–∏—è FSM, –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ —Ç–µ–≥–∞–º | [üìñ state.md](state.md) |
| **service** | –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω–∞—è –ø–æ –¥–æ–º–µ–Ω–∞–º | [üìñ service.md](service.md) |

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

1. **–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Ç–µ–≥** –¥–ª—è –≤–∞—à–µ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `vacancy`)
2. **–°–æ–∑–¥–∞–π—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ node:**
   - `node/{tag}/trigger/{action}_trigger.py` - –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
   - `node/{tag}/code/{action}_code.py` - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
   - `node/{tag}/answer/{state}_answer.py` - –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ —ç–∫—Ä–∞–Ω–æ–≤
3. **–°–æ–∑–¥–∞–π—Ç–µ –≤–∏–¥–∂–µ—Ç-–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä** –≤ `handler/v1/user/{tag}/{widget}_widget.py`
4. **–°–æ–∑–¥–∞–π—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è** –≤ `state/{tag}.py` (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã –Ω–æ–≤—ã–µ)
5. **–°–æ–∑–¥–∞–π—Ç–µ –∫–æ–ª–±–µ–∫–∏** –≤ `callback/{tag}.py` (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã –Ω–æ–≤—ã–µ)
6. **–î–æ–±–∞–≤—å—Ç–µ —Å–µ—Ä–≤–∏—Å—ã** –≤ `service/{domain}/` (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã –Ω–æ–≤—ã–µ)

### 2. –ü—Ä–∏–º–µ—Ä: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã /start

```bash
# 1. –°–æ–∑–¥–∞–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ node/
mkdir -p node/control/trigger node/control/code node/control/answer
touch node/control/trigger/start_command_trigger.py
touch node/control/code/start_command_code.py
touch node/control/answer/new_user_answer.py
touch node/control/answer/vacancy_list_answer.py

# 2. –°–æ–∑–¥–∞–µ–º –≤–∏–¥–∂–µ—Ç-–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –≤ handler/
mkdir -p handler/v1/user/control
touch handler/v1/user/control/start_command_widget.py

# 3. –í–∏–¥–∂–µ—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∏ —Å–≤—è–∑—ã–≤–∞–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–∑ node/
```

## üìñ –°–æ–≥–ª–∞—à–µ–Ω–∏—è –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã

### üéØ –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –®–∞–±–ª–æ–Ω –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è | –ü—Ä–∏–º–µ—Ä |
|-----------|-------------------|---------|
| **Node Trigger** | `{action}_trigger.py` ‚Üí `{Action}Trigger` | `start_command_trigger.py` ‚Üí `StartCommandTrigger` |
| **Node Code** | `{action}_code.py` ‚Üí `{Action}Code` | `start_command_code.py` ‚Üí `StartCommandCode` |
| **Node Answer** | `{state}_answer.py` ‚Üí `{State}Answer` | `vacancy_list_answer.py` ‚Üí `VacancyListAnswer` |
| **–í–∏–¥–∂–µ—Ç—ã** | `{name}_widget.py` | `start_command_widget.py` |
| **–ú–æ–¥—É–ª–∏ —Ç–µ–≥–æ–≤** | `{tag_name}.py` | `onboarding.py` |
| **–ö–ª–∞—Å—Å—ã –∫–æ–ª–±–µ–∫–æ–≤** | `{Name}Callback` | `SetCompanyNameCallback` |
| **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π** | `{snake_case}` | `wait_company_name` |
| **–ü–∞–∫–µ—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤** | `{domain_name}` | `db`, `payment`, `email` |

### üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:**

- **–ú–æ–¥—É–ª–∏:** –û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
- **–ö–ª–∞—Å—Å—ã:** –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ, –ø–æ–ª—è, –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **–°–æ—Å—Ç–æ—è–Ω–∏—è:** –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –≤ –∫–∞–∫–∏—Ö –≤–∏–¥–∂–µ—Ç–∞—Ö
- **–ú–µ—Ç–æ–¥—ã:** –ü–∞—Ä–∞–º–µ—Ç—Ä—ã, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –ø—Ä–∏–º–µ—Ä—ã

–î–æ–±–∞–≤–ª—è–π—Ç–µ –≤ docstring –≤–∏–¥–∂–µ—Ç–∞ —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã–π –±–ª–æ–∫ —Å–≤—è–∑–µ–π:

```
–î–æ—Å—Ç—É–ø–µ–Ω –∏–∑:
1. widget_name (+ –ø—É—Ç—å –¥–æ –Ω–µ–≥–æ)
   - –ò–∑ –∫–∞–∫–æ–≥–æ state (+ –ø—É—Ç—å –¥–æ –Ω–µ–≥–æ)
   - –ò–∑ –∫–∞–∫–æ–≥–æ answer (+ –ø—É—Ç—å –¥–æ –Ω–µ–≥–æ)

–ü–µ—Ä–µ–≤–æ–¥–∏—Ç –≤:
1. widget_name (+ –ø—É—Ç—å –¥–æ –Ω–µ–≥–æ)
   - –í –∫–∞–∫–æ–º state (+ –ø—É—Ç—å –¥–æ –Ω–µ–≥–æ)
   - –ò–∑ –∫–∞–∫–æ–≥–æ answer (+ –ø—É—Ç—å –¥–æ –Ω–µ–≥–æ)
```

–≠—Ç–æ –ø–æ–≤—ã—à–∞–µ—Ç –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç—å –∏ –ø–æ–º–æ–≥–∞–µ—Ç –±—ã—Å—Ç—Ä–µ–µ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –≥—Ä–∞—Ñ–µ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤.

### ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç—ã

–í –∫–∞–∂–¥–æ–º —Ñ–∞–π–ª–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–∞–∫–µ—Ç–∞ –µ—Å—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤.


---


