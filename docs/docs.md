# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å—Ö–µ–º—ã –æ–ø–∏—Å–∞–Ω–∏—è –≤–∏–¥–∂–µ—Ç–æ–≤ Telegram –±–æ—Ç–∞

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
1. [–í–≤–µ–¥–µ–Ω–∏–µ](#–≤–≤–µ–¥–µ–Ω–∏–µ)
2. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ö–µ–º—ã](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-—Å—Ö–µ–º—ã)
3. [–û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª–µ–π –≤–∏–¥–∂–µ—Ç–∞](#–æ–ø–∏—Å–∞–Ω–∏–µ-–ø–æ–ª–µ–π-–≤–∏–¥–∂–µ—Ç–∞)
4. [–ü—Ä–∏–º–µ—Ä—ã –≤–∏–¥–∂–µ—Ç–æ–≤](#–ø—Ä–∏–º–µ—Ä—ã-–≤–∏–¥–∂–µ—Ç–æ–≤)
5. [–†–∞–±–æ—Ç–∞ —Å –≥—Ä–∞—Ñ–æ–º –≤–∏–¥–∂–µ—Ç–æ–≤](#—Ä–∞–±–æ—Ç–∞-—Å-–≥—Ä–∞—Ñ–æ–º-–≤–∏–¥–∂–µ—Ç–æ–≤)
6. [–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏](#–ª—É—á—à–∏–µ-–ø—Ä–∞–∫—Ç–∏–∫–∏)

---

## –í–≤–µ–¥–µ–Ω–∏–µ

### üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–î–∞–Ω–Ω–∞—è —Å—Ö–µ–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø–∏—Å–∞—Ç—å **–≤–µ—Å—å –≥—Ä–∞—Ñ –≤–∏–¥–∂–µ—Ç–æ–≤** Telegram –±–æ—Ç–∞ –≤ –≤–∏–¥–µ JSON-—Ñ–∞–π–ª–∞. –ö–∞–∂–¥—ã–π –≤–∏–¥–∂–µ—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ —É–∑–µ–ª –≥—Ä–∞—Ñ–∞ —Å —è–≤–Ω—ã–º–∏ —Å–≤—è–∑—è–º–∏, —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –∏ –¥–∞–Ω–Ω—ã–º–∏ FSM.

### üèóÔ∏è –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
–°—Ö–µ–º–∞ —É—á–∏—Ç—ã–≤–∞–µ—Ç –º–æ–¥—É–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –≤–∏–¥–∂–µ—Ç–æ–≤:
- **–í–∏–¥–∂–µ—Ç = –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è** —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ Answer-—Ñ–∞–π–ª–∞–º–∏
- **1 Answer-—Ñ–∞–π–ª = 1 —Å–æ—Å—Ç–æ—è–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `empty.py`, `normal.py`, `limit.py`)
- **Code –∫–ª–∞—Å—Å** - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞–∫–æ–π Answer –ø–æ–∫–∞–∑–∞—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- **–î–µ—Ç–∞–ª—å–Ω–æ–µ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –¥–ª—è –∫–∞–∂–¥–æ–≥–æ Answer —É–∫–∞–∑–∞–Ω—ã —É—Å–ª–æ–≤–∏—è –≤—ã–∑–æ–≤–∞ –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### ‚ú® –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ—Ç–æ–∫–∞**: –ü–æ–ª–Ω–∞—è –∫–∞—Ä—Ç–∏–Ω–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É –≤–∏–¥–∂–µ—Ç–∞–º–∏
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫–æ–¥–∞**: –Ø–≤–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Ö–æ–¥–æ–≤/–≤—ã—Ö–æ–¥–æ–≤ –∫–∞–∂–¥–æ–≥–æ –≤–∏–¥–∂–µ—Ç–∞
- **–ö–æ–Ω—Ç—Ä–æ–ª—å —Å–æ—Å—Ç–æ—è–Ω–∏–π**: –ß–µ—Ç–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ FSM –Ω–∞ –≤—Ö–æ–¥–µ –∏ –≤—ã—Ö–æ–¥–µ
- **–£–ø—Ä–æ—â–µ–Ω–∏–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞**: –í–∏–¥–Ω–æ –≤—Å–µ —Å–≤—è–∑–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å Answer-–æ–≤**: –ü–æ–Ω—è—Ç–Ω–æ –∫–∞–∫–æ–π —ç–∫—Ä–∞–Ω –ø—Ä–∏ –∫–∞–∫–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ö–µ–º—ã

### –ö–æ—Ä–Ω–µ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ JSON
```json
{
  "widgets": {
    "widget_name_1": { /* –æ–ø–∏—Å–∞–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞ */ },
    "widget_name_2": { /* –æ–ø–∏—Å–∞–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞ */ },
    "widget_name_3": { /* –æ–ø–∏—Å–∞–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞ */ }
  },
  "tags": {
    "onboarding": ["widget_name_1", "widget_name_2"],
    "payment": ["widget_name_3"]
  },
  "entry_points": ["start_widget", "help_widget"]
}
```

### –û–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–æ–≤:
- **widgets** - —Å–ª–æ–≤–∞—Ä—å –≤—Å–µ—Ö –≤–∏–¥–∂–µ—Ç–æ–≤ –±–æ—Ç–∞
- **tags** - –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –≤–∏–¥–∂–µ—Ç–æ–≤ –ø–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –æ–±–ª–∞—Å—Ç—è–º
- **entry_points** - —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞ –≤ –±–æ—Ç–∞ (–æ–±—ã—á–Ω–æ –∫–æ–º–∞–Ω–¥—ã /start, /help)

---

## –û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª–µ–π –≤–∏–¥–∂–µ—Ç–∞

### üì¶ –ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–∏–¥–∂–µ—Ç–∞

```json
{
  "widget_name": {
    "id": "unique_widget_id",
    "tag": "tag_name",
    "description": "–ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞, —á—Ç–æ –æ–Ω –¥–µ–ª–∞–µ—Ç, –æ—Ç–∫—É–¥–∞ –∏ –∫—É–¥–∞ –≤–µ–¥–µ—Ç",
    
    "from": ["widget1", "widget2"],
    
    "to": {
      "condition1": "target_widget1",
      "condition2": "target_widget2"
    },
    
    "state": {
      "Trigger": ["state1", "state2"],
      "Answer": {
        "empty.py": "state3",
        "normal.py": "state4"
      }
    },
    
    "FSM": {
      "Trigger": [
        "field1: int (required) - –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª—è",
        "field2: str (required) - –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª—è",
        "field3: bool (optional) - –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª—è"
      ],
      "Answer": [
        "field4: str (required) - –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª—è (—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞)",
        "field5: int (optional) - –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª—è (—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ empty.py)",
        "field6: bool (optional) - –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª—è (—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ normal.py –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏)"
      ]
    },
    
    "answers": {
      "empty.py": {
        "condition": "len(vacancies) == 0",
        "description": "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ —Å–ø–∏—Å–æ–∫ –ø—É—Å—Ç",
        "sets_state": "state3"
      },
      "normal.py": {
        "condition": "len(vacancies) > 0",
        "description": "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ –µ—Å—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã",
        "sets_state": "state4"
      }
    },
    
    "components": {
      "trigger": "node/{tag}/trigger/{action}_trigger.py",
      "code": "node/{tag}/code/{action}_code.py",
      "answers": {
        "empty": "node/{tag}/answer/empty_answer.py",
        "normal": "node/{tag}/answer/normal_answer.py"
      }
    },
    
    "handler": [
      "@router.message(StateFilter('state1'))",
      "@router.callback_query(SomeCallback.filter())"
    ]
  }
}
```

### üîç –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª–µ–π

#### **id** (string, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
–£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤–∏–¥–∂–µ—Ç–∞.

**–§–æ—Ä–º–∞—Ç:** `{widget_name}_widget`

**–ü—Ä–∏–º–µ—Ä:**
```json
"id": "set_company_name_widget"
```

---

#### **tag** (string, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –≥—Ä—É–ø–ø–∞, –∫ –∫–æ—Ç–æ—Ä–æ–π –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –≤–∏–¥–∂–µ—Ç.

**–ü—Ä–∏–º–µ—Ä—ã —Ç–µ–≥–æ–≤:**
- `onboarding` - –ø—Ä–æ—Ü–µ—Å—Å –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞
- `payment` - —Ä–∞–±–æ—Ç–∞ —Å –ø–ª–∞—Ç–µ–∂–∞–º–∏
- `interview` - –ø—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤—å—é
- `settings` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `admin` - –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä:**
```json
"tag": "onboarding"
```

---

#### **description** (string, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
–ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞.

**–î–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å:**
1. –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –≤–∏–¥–∂–µ—Ç
2. –ò–∑ –∫–∞–∫–∏—Ö –≤–∏–¥–∂–µ—Ç–æ–≤ –º–æ–∂–Ω–æ –ø–æ–ø–∞—Å—Ç—å
3. –í –∫–∞–∫–∏–µ –≤–∏–¥–∂–µ—Ç—ã –≤–µ–¥–µ—Ç –∏ –ø—Ä–∏ –∫–∞–∫–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö
4. –ß–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã–µ —Å–≤—è–∑–∏ –ø–æ —à–∞–±–ª–æ–Ω—É ¬´–î–æ—Å—Ç—É–ø–µ–Ω –∏–∑/–ü–µ—Ä–µ–≤–æ–¥–∏—Ç –≤¬ª (—Å–º. –Ω–∏–∂–µ)

**–ü—Ä–∏–º–µ—Ä:**
```json
"description": "–í–∏–¥–∂–µ—Ç –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏. –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤–≤–µ—Å—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞. –ü–æ–ø–∞—Å—Ç—å –º–æ–∂–Ω–æ –∏–∑ start_widget –∏–ª–∏ edit_company_widget. –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ set_company_description. –ü—Ä–∏ –æ—à–∏–±–∫–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —Ç–µ–∫—É—â–µ–º –≤–∏–¥–∂–µ—Ç–µ —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ–± –æ—à–∏–±–∫–µ."
```

---

### üß≠ –ß–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–≤—è–∑–µ–π
–ü–æ–º–∏–º–æ –ø–æ–ª–µ–π `from` –∏ `to`, –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–∏–¥–∂–µ—Ç–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–ª—è—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–π –±–ª–æ–∫, —Ñ–∏–∫—Å–∏—Ä—É—é—â–∏–π —Å–≤—è–∑–∏ –≤–º–µ—Å—Ç–µ —Å –ø—É—Ç—è–º–∏ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏:

```
–î–æ—Å—Ç—É–ø–µ–Ω –∏–∑:
1. widget_name (+ –ø—É—Ç—å –¥–æ –Ω–µ–≥–æ)
   - –ò–∑ –∫–∞–∫–æ–≥–æ state (+ –ø—É—Ç—å –¥–æ –Ω–µ–≥–æ)
   - –ò–∑ –∫–∞–∫–æ–≥–æ answer (+ –ø—É—Ç—å –¥–æ –Ω–µ–≥–æ)
2. ...

–ü–µ—Ä–µ–≤–æ–¥–∏—Ç –≤:
1. widget_name (+ –ø—É—Ç—å –¥–æ –Ω–µ–≥–æ)
   - –í –∫–∞–∫–æ–º state (+ –ø—É—Ç—å –¥–æ –Ω–µ–≥–æ)
   - –ò–∑ –∫–∞–∫–æ–≥–æ answer (+ –ø—É—Ç—å –¥–æ –Ω–µ–≥–æ)
2. ...
```

–ì–¥–µ ¬´–ø—É—Ç—å¬ª ‚Äî —ç—Ç–æ –ø–æ–ª–Ω—ã–π –ø—É—Ç—å —Ñ–∞–π–ª–∞ –≤–∏–¥–∂–µ—Ç–∞, —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–ª–∏ Answer (–Ω–∞–ø—Ä–∏–º–µ—Ä, `handler/v1/user/vacancy/list_widget.py`, `state/vacancy.py::vacancy_list`, `node/vacancy/answer/normal_answer.py`). –≠—Ç–æ—Ç –±–ª–æ–∫ –¥—É–±–ª–∏—Ä—É–µ—Ç `from`/`to`, –Ω–æ –¥–µ–ª–∞–µ—Ç —Å–≤—è–∑–∏ –Ω–∞–≥–ª—è–¥–Ω—ã–º–∏ –¥–ª—è —á–∏—Ç–∞—Ç–µ–ª–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

---

#### **from** (array, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
–ú–∞—Å—Å–∏–≤ –∏–º–µ–Ω –≤–∏–¥–∂–µ—Ç–æ–≤, –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –≤–æ–∑–º–æ–∂–µ–Ω –ø–µ—Ä–µ—Ö–æ–¥ –≤ —Ç–µ–∫—É—â–∏–π –≤–∏–¥–∂–µ—Ç.

**–û—Å–æ–±—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:**
- `["entry"]` - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–º–∞–Ω–¥–∞ /start)
- `[]` - –≤–∏–¥–∂–µ—Ç –Ω–µ –∏–º–µ–µ—Ç –≤—Ö–æ–¥—è—â–∏—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ (–º–æ–∂–µ—Ç –±—ã—Ç—å –æ—à–∏–±–æ—á–Ω—ã–º)

**–ü—Ä–∏–º–µ—Ä:**
```json
"from": ["start_widget", "edit_company_widget", "retry_widget"]
```

---

#### **to** (object, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
–û–±—ä–µ–∫—Ç —Å —É—Å–ª–æ–≤–∏—è–º–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ –¥—Ä—É–≥–∏–µ –≤–∏–¥–∂–µ—Ç—ã.

**–ö–ª—é—á–∏** - —É—Å–ª–æ–≤–∏—è/—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤–∏–¥–∂–µ—Ç–∞  
**–ó–Ω–∞—á–µ–Ω–∏—è** - –∏–º–µ–Ω–∞ —Ü–µ–ª–µ–≤—ã—Ö –≤–∏–¥–∂–µ—Ç–æ–≤

**–¢–∏–ø–∏—á–Ω—ã–µ —É—Å–ª–æ–≤–∏—è:**
- `success` - —É—Å–ø–µ—à–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
- `validation_failed` - –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- `insufficient_balance` - –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–∞–ª–∞–Ω—Å–∞
- `timeout` - —Ç–∞–π–º–∞—É—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏
- `cancelled` - –æ—Ç–º–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- `retry` - –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞

**–ü—Ä–∏–º–µ—Ä:**
```json
"to": {
  "success": "set_company_description",
  "insufficient_balance": "show_balance_widget",
  "validation_failed": "set_company_name",
  "cancelled": "main_menu"
}
```

---

#### **state** (object, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
–û–ø–∏—Å–∞–Ω–∏–µ FSM —Å–æ—Å—Ç–æ—è–Ω–∏–π –Ω–∞ –≤—Ö–æ–¥–µ –∏ –≤—ã—Ö–æ–¥–µ –≤–∏–¥–∂–µ—Ç–∞.

##### **state.Trigger** (array)
–ú–∞—Å—Å–∏–≤ —Å–æ—Å—Ç–æ—è–Ω–∏–π FSM, –ø—Ä–∏ –∫–æ—Ç–æ—Ä—ã—Ö –≤–∏–¥–∂–µ—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω.

**–û—Å–æ–±—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:**
- `["*"]` - –ª—é–±–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –∫–æ–º–∞–Ω–¥ /help)
- `[]` - –Ω–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ —Å–æ—Å—Ç–æ—è–Ω–∏—é

**–ü—Ä–∏–º–µ—Ä:**
```json
"Trigger": ["waiting_company_name", "idle", "onboarding_started"]
```

##### **state.Answer** (object)
–û–±—ä–µ–∫—Ç, —Å–≤—è–∑—ã–≤–∞—é—â–∏–π Answer-—Ñ–∞–π–ª—ã —Å —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ FSM, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç.

**–ö–ª—é—á–∏** - –∏–º–µ–Ω–∞ Answer-—Ñ–∞–π–ª–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `empty.py`, `normal.py`)  
**–ó–Ω–∞—á–µ–Ω–∏—è** - —Å–æ—Å—Ç–æ—è–Ω–∏—è FSM, –∫–æ—Ç–æ—Ä—ã–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–π Answer

**–ü—Ä–∏–º–µ—Ä:**
```json
"Answer": {
  "empty.py": "vacancy_creation",
  "few.py": "vacancy_list",
  "normal.py": "vacancy_list",
  "limit.py": "vacancy_list"
}
```

**–ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä state:**
```json
"state": {
  "Trigger": ["idle", "vacancy_menu"],
  "Answer": {
    "empty.py": "vacancy_creation",
    "normal.py": "vacancy_list"
  }
}
```

---

#### **FSM** (object, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
–û–ø–∏—Å–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö FSM –Ω–∞ –≤—Ö–æ–¥–µ –∏ –≤—ã—Ö–æ–¥–µ –≤–∏–¥–∂–µ—Ç–∞.

##### **FSM.Trigger** (array)
–ú–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø–æ–ª–µ–π FSM, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –≤–∏–¥–∂–µ—Ç–∞.

**–§–æ—Ä–º–∞—Ç —Å—Ç—Ä–æ–∫–∏:** `"field_name: type (required/optional) - –æ–ø–∏—Å–∞–Ω–∏–µ"`

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `field_name` - –∏–º—è –ø–æ–ª—è –≤ FSM
- `type` - —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö (int, str, bool, dict, list, datetime –∏ —Ç.–¥.)
- `(required)` - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ (–∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –±–µ–∑ `.get()`)
- `(optional)` - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ (–∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `.get()` –∏–ª–∏ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π)
- `–æ–ø–∏—Å–∞–Ω–∏–µ` - —á—Ç–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–µ

**–ü—Ä–∏–º–µ—Ä:**
```json
"Trigger": [
  "user_id: int (required) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î",
  "telegram_id: int (required) - Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
  "language: str (optional) - —è–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 'ru')",
  "session_data: dict (optional) - –¥–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å–µ—Å—Å–∏–∏"
]
```

##### **FSM.Answer** (array)
–ú–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø–æ–ª–µ–π FSM, –∫–æ—Ç–æ—Ä—ã–µ –≤–∏–¥–∂–µ—Ç –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç.

**–§–æ—Ä–º–∞—Ç —Å—Ç—Ä–æ–∫–∏:** `"field_name: type (required/optional) - –æ–ø–∏—Å–∞–Ω–∏–µ (—É—Å–ª–æ–≤–∏–µ)"`

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `field_name` - –∏–º—è –ø–æ–ª—è –≤ FSM
- `type` - —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö
- `(required)` - –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞
- `(optional)` - –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è —É—Å–ª–æ–≤–Ω–æ
- `–æ–ø–∏—Å–∞–Ω–∏–µ` - —á—Ç–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–µ
- `(—É—Å–ª–æ–≤–∏–µ)` - –∫–æ–≥–¥–∞ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è (–¥–ª—è optional) –∏–ª–∏ –≤ –∫–∞–∫–æ–º Answer (–µ—Å–ª–∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ)

**–ü—Ä–∏–º–µ—Ä:**
```json
"Answer": [
  "company_name: str (required) - –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ (–≤—Å–µ–≥–¥–∞)",
  "timestamp: datetime (required) - –≤—Ä–µ–º—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (–≤—Å–µ–≥–¥–∞)",
  "validation_errors: list (optional) - —Å–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫ (–µ—Å–ª–∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ –ø—Ä–æ—à–ª–∞)",
  "retry_count: int (optional) - —Å—á–µ—Ç—á–∏–∫ –ø–æ–ø—ã—Ç–æ–∫ (—É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—à–∏–±–∫–µ)"
]
```

**–ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä FSM:**
```json
"FSM": {
  "Trigger": [
    "user_id: int (required) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
    "language: str (optional) - —è–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞"
  ],
  "Answer": [
    "company_name: str (required) - –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ (–≤—Å–µ–≥–¥–∞)",
    "validation_errors: list (optional) - –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (–ø—Ä–∏ –æ—à–∏–±–∫–µ)"
  ]
}
```

---

#### **handler** (array, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
–ú–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫ —Å –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞–º–∏ —Ö–µ–Ω–¥–ª–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤–∏–¥–∂–µ—Ç–∞.

**–§–æ—Ä–º–∞—Ç —Å—Ç—Ä–æ–∫–∏:** –¢–æ—á–Ω—ã–π –∫–æ–¥ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞ –∫–∞–∫ –≤ Python

**–¢–∏–ø–∏—á–Ω—ã–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã:**
- `@router.message(StateFilter('state_name'))` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏
- `@router.callback_query(CallbackClass.filter())` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–ª–±–µ–∫–∞
- `@router.command(commands=['start'])` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥
- `@router.message(F.text)` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- `@router.message(F.document)` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

**–ü—Ä–∏–º–µ—Ä:**
```json
"handler": [
  "@onboarding_router.message(StateFilter('waiting_company_name'))",
  "@onboarding_router.callback_query(StartOnboardingCallback.filter())",
  "@onboarding_router.callback_query(RetryCompanyNameCallback.filter())"
]
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –£–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ä–æ—É—Ç–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, `onboarding_router`, `payment_router`)

---

#### **components** (object, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
–û–±—ä–µ–∫—Ç —Å –ø—É—Ç—è–º–∏ –∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º –≤–∏–¥–∂–µ—Ç–∞ –≤ `node/`.

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```json
{
  "trigger": "node/{tag}/trigger/{action}_trigger.py",
  "code": "node/{tag}/code/{action}_code.py",
  "answers": {
    "{answer_name}": "node/{tag}/answer/{state}_answer.py"
  }
}
```

**–ü–æ–ª—è:**
- **trigger** (string) - –ø—É—Ç—å –∫ Trigger –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É
- **code** (string) - –ø—É—Ç—å –∫ Code –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É
- **answers** (object) - –º–∞–ø–ø–∏–Ω–≥ –Ω–∞–∑–≤–∞–Ω–∏–π Answer ‚Üí –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º

**–ü—Ä–∏–º–µ—Ä:**
```json
"components": {
  "trigger": "node/control/trigger/start_command_trigger.py",
  "code": "node/control/code/start_command_code.py",
  "answers": {
    "new_user": "node/control/answer/new_user_answer.py",
    "vacancy_list": "node/control/answer/vacancy_list_answer.py"
  }
}
```

**–ó–∞—á–µ–º –Ω—É–∂–Ω–æ:**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–∑ `node/` –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –≤–∏–¥–∂–µ—Ç–µ
- –ü–æ–º–æ–≥–∞–µ—Ç –æ—Ç—Å–ª–µ–¥–∏—Ç—å –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –£–ø—Ä–æ—â–∞–µ—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏—é –ø–æ –∫–æ–¥—É

---

#### **answers** (object, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
–û–±—ä–µ–∫—Ç —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º Answer-—Ñ–∞–π–ª–æ–≤ –≤–∏–¥–∂–µ—Ç–∞ –∏ —É—Å–ª–æ–≤–∏–π –∏—Ö –≤—ã–∑–æ–≤–∞.

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
–ö–∞–∂–¥—ã–π Answer-—Ñ–∞–π–ª –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç–æ–º —Å –ø–æ–ª—è–º–∏:
- **condition** (string) - —É—Å–ª–æ–≤–∏–µ, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–∞–Ω–Ω—ã–π Answer (–∫–æ–¥ –Ω–∞ Python)
- **description** (string) - —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ, –∫–æ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
- **sets_state** (string) - FSM —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–π Answer

**–§–æ—Ä–º–∞—Ç:**
```json
"answers": {
  "answer_file_name.py": {
    "condition": "Python —É—Å–ª–æ–≤–∏–µ",
    "description": "–û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è",
    "sets_state": "fsm_state_name"
  }
}
```

**–ü—Ä–∏–º–µ—Ä:**
```json
"answers": {
  "empty.py": {
    "condition": "len(vacancies) == 0",
    "description": "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –≤–∞–∫–∞–Ω—Å–∏–π. –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Å–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é –≤–∞–∫–∞–Ω—Å–∏—é.",
    "sets_state": "vacancy_creation"
  },
  "few.py": {
    "condition": "0 < len(vacancies) < 5",
    "description": "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ –≤–∞–∫–∞–Ω—Å–∏–π –º–∞–ª–æ (1-4). –°–ø–∏—Å–æ–∫ –±–µ–∑ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ —Å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º –æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–æ–∑–¥–∞—Ç—å –µ—â–µ.",
    "sets_state": "vacancy_list"
  },
  "normal.py": {
    "condition": "5 <= len(vacancies) < user_limit",
    "description": "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≤–∞–∫–∞–Ω—Å–∏–π (5+). –°–ø–∏—Å–æ–∫ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π.",
    "sets_state": "vacancy_list"
  },
  "limit.py": {
    "condition": "len(vacancies) >= user_limit",
    "description": "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç –ª–∏–º–∏—Ç –≤–∞–∫–∞–Ω—Å–∏–π. –°–ø–∏—Å–æ–∫ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º –∞–ø–≥—Ä–µ–π–¥–∞.",
    "sets_state": "vacancy_list"
  }
}
```

**–í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:**
1. **–£—Å–ª–æ–≤–∏—è –≤–∑–∞–∏–º–æ–∏—Å–∫–ª—é—á–∞—é—â–∏–µ** - —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω Answer –¥–æ–ª–∂–µ–Ω —Å—Ä–∞–±–æ—Ç–∞—Ç—å
2. **Code –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç Answer** - —É—Å–ª–æ–≤–∏—è –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤ –º–µ—Ç–æ–¥–µ `_route_to_answer()` –∫–ª–∞—Å—Å–∞ Code
3. **–ò–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ —Ç–æ—á–Ω—ã–µ** - —É–∫–∞–∑—ã–≤–∞–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ Answer-—Ñ–∞–π–ª–æ–≤ –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `answers/`
4. **sets_state** - –¥–æ–ª–∂–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—é –≤ `state.Answer[filename]`

---

## –ü—Ä–∏–º–µ—Ä—ã –≤–∏–¥–∂–µ—Ç–æ–≤

### –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–π –≤–∏–¥–∂–µ—Ç –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞

```json
{
  "set_company_name": {
    "id": "set_company_name_widget",
    "tag": "onboarding",
    "description": "–í–∏–¥–∂–µ—Ç –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏. –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤–≤–µ—Å—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞. –ü–æ–ø–∞—Å—Ç—å –º–æ–∂–Ω–æ –∏–∑ start_onboarding_widget. –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ set_company_description_widget. –ü—Ä–∏ –æ—à–∏–±–∫–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —Ç–µ–∫—É—â–µ–º –≤–∏–¥–∂–µ—Ç–µ —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ–± –æ—à–∏–±–∫–µ.",
    
    "from": ["start_onboarding"],
    
    "to": {
      "success": "set_company_description",
      "validation_failed": "set_company_name"
    },
    
    "state": {
      "Trigger": ["waiting_company_name"],
      "Answer": {
        "success.py": "waiting_company_description",
        "validation_error.py": "waiting_company_name"
      }
    },
    
    "FSM": {
      "Trigger": [
        "user_id: int (required) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î",
        "language: str (optional) - —è–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞"
      ],
      "Answer": [
        "company_name: str (required) - –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ (–≤ success.py)",
        "validation_errors: list (optional) - —Å–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (–≤ validation_error.py)"
      ]
    },
    
    "answers": {
      "success.py": {
        "condition": "validation_result.is_valid",
        "description": "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–∞–∑–≤–∞–Ω–∏—è. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥.",
        "sets_state": "waiting_company_description"
      },
      "validation_error.py": {
        "condition": "not validation_result.is_valid",
        "description": "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—à–∏–±–∫–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏. –í—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫ –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –≤–≤–µ—Å—Ç–∏ –∑–∞–Ω–æ–≤–æ.",
        "sets_state": "waiting_company_name"
      }
    },
    
    "handler": [
      "@onboarding_router.message(StateFilter('waiting_company_name'))",
      "@onboarding_router.callback_query(RetryCompanyNameCallback.filter())"
    ]
  }
}
```

### –ü—Ä–∏–º–µ—Ä 2: –í–∏–¥–∂–µ—Ç —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏

```json
{
  "start_generation": {
    "id": "start_generation_widget",
    "tag": "generation",
    "description": "–í–∏–¥–∂–µ—Ç –∑–∞–ø—É—Å–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –±–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏. –ü–æ–ø–∞—Å—Ç—å –º–æ–∂–Ω–æ –∏–∑ main_menu –∏–ª–∏ settings_widget. –ü—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–º –±–∞–ª–∞–Ω—Å–µ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –≤ show_balance_widget. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –≤ generation_progress_widget. –ü—Ä–∏ –æ—Ç–º–µ–Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤ main_menu. –ü—Ä–∏ –æ—à–∏–±–∫–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —ç–∫—Ä–∞–Ω –æ—à–∏–±–∫–∏.",
    
    "from": ["main_menu", "settings_widget"],
    
    "to": {
      "success": "generation_progress",
      "insufficient_balance": "show_balance",
      "cancelled": "main_menu",
      "error": "show_error"
    },
    
    "state": {
      "Trigger": ["idle", "ready_to_generate"],
      "Answer": {
        "success.py": "generation_in_progress",
        "insufficient_balance.py": "show_balance",
        "cancelled.py": "idle",
        "error.py": "error"
      }
    },
    
    "FSM": {
      "Trigger": [
        "user_id: int (required) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
        "balance: int (required) - —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
        "generation_params: dict (optional) - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏",
        "previous_generation_id: int (optional) - ID –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–∞"
      ],
      "Answer": [
        "generation_id: int (required) - ID —Å–æ–∑–¥–∞–Ω–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (–≤ success.py)",
        "status: str (required) - —Å—Ç–∞—Ç—É—Å –æ–ø–µ—Ä–∞—Ü–∏–∏ (–≤—Å–µ–≥–¥–∞)",
        "error_message: str (optional) - —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ (–≤ error.py)",
        "balance_required: int (optional) - –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –±–∞–ª–∞–Ω—Å (–≤ insufficient_balance.py)"
      ]
    },
    
    "answers": {
      "success.py": {
        "condition": "balance >= required_balance and not cancelled",
        "description": "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –∑–∞–ø—É—Å–∫–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –∏ ID –∑–∞–¥–∞—á–∏.",
        "sets_state": "generation_in_progress"
      },
      "insufficient_balance.py": {
        "condition": "balance < required_balance",
        "description": "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–µ –±–∞–ª–∞–Ω—Å–∞. –í—ã–≤–æ–¥–∏—Ç —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å, —Ç—Ä–µ–±—É–µ–º—ã–π –±–∞–ª–∞–Ω—Å –∏ –∫–Ω–æ–ø–∫—É –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è.",
        "sets_state": "show_balance"
      },
      "cancelled.py": {
        "condition": "cancelled",
        "description": "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é.",
        "sets_state": "idle"
      },
      "error.py": {
        "condition": "exception is not None",
        "description": "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–∏—Å—Ç–µ–º–Ω–æ–π –æ—à–∏–±–∫–µ. –í—ã–≤–æ–¥–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—à–∏–±–∫–µ –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É.",
        "sets_state": "error"
      }
    },
    
    "handler": [
      "@generation_router.callback_query(StartGenerationCallback.filter())",
      "@generation_router.callback_query(RetryGenerationCallback.filter())"
    ]
  }
}
```

### –ü—Ä–∏–º–µ—Ä 3: –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (–∫–æ–º–∞–Ω–¥–∞ /start)

```json
{
  "start_command": {
    "id": "start_command_widget",
    "tag": "control",
    "description": "–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –±–æ—Ç–∞ –ø–æ –∫–æ–º–∞–Ω–¥–µ /start. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å. –ï—Å–ª–∏ –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –≤ registration_widget —Å –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–æ–º. –ï—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π - –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –≤ main_menu —Å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ–º.",
    
    "from": ["entry"],
    
    "to": {
      "new_user": "registration",
      "existing_user": "main_menu"
    },
    
    "state": {
      "Trigger": ["*"],
      "Answer": {
        "new_user.py": "registration_started",
        "existing_user.py": "idle"
      }
    },
    
    "FSM": {
      "Trigger": [
        "-- –Ω–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π, –∫–æ–º–∞–Ω–¥–∞ /start –¥–æ—Å—Ç—É–ø–Ω–∞ –≤—Å–µ–≥–¥–∞ --"
      ],
      "Answer": [
        "user_id: int (required) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î (–≤—Å–µ–≥–¥–∞)",
        "telegram_id: int (required) - Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–≤—Å–µ–≥–¥–∞)",
        "is_new_user: bool (required) - —Ñ–ª–∞–≥ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–≤—Å–µ–≥–¥–∞)",
        "language: str (optional) - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —è–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–µ—Å–ª–∏ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å)"
      ]
    },
    
    "answers": {
      "new_user.py": {
        "condition": "user is None",
        "description": "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–æ–≤–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é. –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ, –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –±–æ—Ç–∞ –∏ —Å—Ç–∞—Ä—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.",
        "sets_state": "registration_started"
      },
      "existing_user.py": {
        "condition": "user is not None",
        "description": "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é. –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é.",
        "sets_state": "idle"
      }
    },
    
    "handler": [
      "@control_router.message(Command('start'))"
    ]
  }
}
```

### –ü—Ä–∏–º–µ—Ä 4: –í–∏–¥–∂–µ—Ç —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —Ñ–∞–π–ª–æ–≤

```json
{
  "upload_resume": {
    "id": "upload_resume_widget",
    "tag": "interview",
    "description": "–í–∏–¥–∂–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–∑—é–º–µ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç PDF –∏–ª–∏ DOCX —Ñ–∞–π–ª, –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ñ–æ—Ä–º–∞—Ç –∏ —Ä–∞–∑–º–µ—Ä. –ü–æ–ø–∞—Å—Ç—å –º–æ–∂–Ω–æ –∏–∑ candidate_profile_widget –∏–ª–∏ retry_upload. –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ parse_resume_widget. –ü—Ä–∏ –æ—à–∏–±–∫–µ —Ñ–æ—Ä–º–∞—Ç–∞ –∏–ª–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —Ç–µ–∫—É—â–µ–º –≤–∏–¥–∂–µ—Ç–µ —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ–± –æ—à–∏–±–∫–µ. –ü—Ä–∏ –æ—Ç–º–µ–Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤ –ø—Ä–æ—Ñ–∏–ª—å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞.",
    
    "from": ["candidate_profile", "retry_upload"],
    
    "to": {
      "success": "parse_resume",
      "invalid_format": "upload_resume",
      "file_too_large": "upload_resume",
      "cancelled": "candidate_profile"
    },
    
    "state": {
      "Trigger": ["waiting_resume_upload"],
      "Answer": {
        "success.py": "parsing_resume",
        "invalid_format.py": "waiting_resume_upload",
        "file_too_large.py": "waiting_resume_upload",
        "cancelled.py": "idle"
      }
    },
    
    "FSM": {
      "Trigger": [
        "user_id: int (required) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
        "candidate_id: int (required) - ID –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ä–µ–∑—é–º–µ",
        "previous_resume_id: int (optional) - ID –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ä–µ–∑—é–º–µ (–¥–ª—è –∑–∞–º–µ–Ω—ã)"
      ],
      "Answer": [
        "resume_file_id: str (required) - Telegram file_id –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ (–≤ success.py)",
        "file_name: str (required) - –∏–º—è —Ñ–∞–π–ª–∞ (–≤ success.py)",
        "file_size: int (required) - —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –≤ –±–∞–π—Ç–∞—Ö (–≤ success.py)",
        "error_type: str (optional) - —Ç–∏–ø –æ—à–∏–±–∫–∏ (–≤ invalid_format.py –∏ file_too_large.py)",
        "error_message: str (optional) - —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ (–≤ invalid_format.py –∏ file_too_large.py)"
      ]
    },
    
    "answers": {
      "success.py": {
        "condition": "file_validation.is_valid",
        "description": "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–∞–π–ª–∞. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø–∞—Ä—Å–∏–Ω–≥.",
        "sets_state": "parsing_resume"
      },
      "invalid_format.py": {
        "condition": "file_validation.error_type == 'invalid_format'",
        "description": "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–º —Ñ–æ—Ä–º–∞—Ç–µ —Ñ–∞–π–ª–∞. –í—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ (PDF, DOCX) –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å –∑–∞–Ω–æ–≤–æ.",
        "sets_state": "waiting_resume_upload"
      },
      "file_too_large.py": {
        "condition": "file_validation.error_type == 'file_too_large'",
        "description": "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ —Ñ–∞–π–ª –ø—Ä–µ–≤—ã—à–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä. –í—ã–≤–æ–¥–∏—Ç —Ç–µ–∫—É—â–∏–π –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä, –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å –º–µ–Ω—å—à–∏–π —Ñ–∞–π–ª.",
        "sets_state": "waiting_resume_upload"
      },
      "cancelled.py": {
        "condition": "user_cancelled",
        "description": "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤ –ø—Ä–æ—Ñ–∏–ª—å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞.",
        "sets_state": "idle"
      }
    },
    
    "handler": [
      "@interview_router.message(StateFilter('waiting_resume_upload'), F.document)",
      "@interview_router.callback_query(UploadResumeCallback.filter())",
      "@interview_router.callback_query(RetryUploadCallback.filter())"
    ]
  }
}
```

---

## –†–∞–±–æ—Ç–∞ —Å –≥—Ä–∞—Ñ–æ–º –≤–∏–¥–∂–µ—Ç–æ–≤

### üìä –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞

–ò—Å–ø–æ–ª—å–∑—É—è –¥–∞–Ω–Ω—É—é —Å—Ö–µ–º—É, –º–æ–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –≥—Ä–∞—Ñ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É –≤–∏–¥–∂–µ—Ç–∞–º–∏:

```
[start_command] 
    ‚Üì new_user
[registration]
    ‚Üì success
[main_menu]
    ‚Üì start_generation
[start_generation]
    ‚Üì success          ‚Üì insufficient_balance
[generation_progress] [show_balance]
```

### üîç –ê–Ω–∞–ª–∏–∑ —Å–≤—è–∑–µ–π

**–í—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏ –≤–∏–¥–∂–µ—Ç–∞:**
```python
widget_name = "set_company_description"
incoming = [w for w, data in widgets.items() 
            if widget_name in data['to'].values()]
# –†–µ–∑—É–ª—å—Ç–∞—Ç: ['set_company_name', 'edit_company']
```

**–ò—Å—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏ –≤–∏–¥–∂–µ—Ç–∞:**
```python
widget_name = "start_generation"
outgoing = widgets[widget_name]['to']
# –†–µ–∑—É–ª—å—Ç–∞—Ç: {'success': 'generation_progress', 
#             'insufficient_balance': 'show_balance', ...}
```

### üîÑ –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ö–µ–º—ã

**–ü—Ä–æ–≤–µ—Ä–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å:**

1. **–í—Å–µ –≤–∏–¥–∂–µ—Ç—ã –≤ `to` —Å—É—â–µ—Å—Ç–≤—É—é—Ç:**
```python
for widget, data in widgets.items():
    for target in data['to'].values():
        assert target in widgets, f"Widget {target} not found"
```

2. **–í—Å–µ –≤–∏–¥–∂–µ—Ç—ã –≤ `from` –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã:**
```python
for widget, data in widgets.items():
    for source in data['from']:
        if source != 'entry':
            assert widget in widgets[source]['to'].values()
```

3. **–í—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è FSM –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã:**
```python
all_states = set()
for data in widgets.values():
    all_states.update(data['state']['Trigger'])
    all_states.update(data['state']['Answer'].values())  # Answer —Ç–µ–ø–µ—Ä—å –æ–±—ä–µ–∫—Ç
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–ø–∏—Å–∞–Ω—ã –≤ state/
```

4. **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ Answer-—Ñ–∞–π–ª–æ–≤ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π:**
```python
for widget, data in widgets.items():
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –∫–∞–∂–¥—ã–π Answer-—Ñ–∞–π–ª –∏–∑ answers –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ state.Answer
    for answer_file in data['answers'].keys():
        assert answer_file in data['state']['Answer'], \
            f"Answer {answer_file} not in state.Answer for {widget}"
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ sets_state —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç state.Answer
    for answer_file, answer_data in data['answers'].items():
        expected_state = data['state']['Answer'][answer_file]
        actual_state = answer_data['sets_state']
        assert expected_state == actual_state, \
            f"State mismatch for {answer_file} in {widget}"
```

---

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### ‚úÖ –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ

**–í–∏–¥–∂–µ—Ç—ã:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ snake_case: `set_company_name`, `show_balance`
- –ò–º—è –¥–æ–ª–∂–Ω–æ –æ—Ç—Ä–∞–∂–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ: `upload_resume`, `validate_email`

**ID –≤–∏–¥–∂–µ—Ç–æ–≤:**
- –§–æ—Ä–º–∞—Ç: `{widget_name}_widget`
- –ü—Ä–∏–º–µ—Ä: `set_company_name_widget`

**–¢–µ–≥–∏:**
- –û–¥–∏–Ω —Ç–µ–≥ = –æ–¥–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –æ–±–ª–∞—Å—Ç—å
- –ü—Ä–∏–º–µ—Ä—ã: `onboarding`, `payment`, `interview`, `admin`

**–£—Å–ª–æ–≤–∏—è –≤ `to`:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞: `success`, `validation_failed`, `insufficient_balance`
- –ò–∑–±–µ–≥–∞–π—Ç–µ `error` - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏

### üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**Description:**
- –ü–µ—Ä–≤–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ - —á—Ç–æ –¥–µ–ª–∞–µ—Ç –≤–∏–¥–∂–µ—Ç
- –í—Ç–æ—Ä–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ - –æ—Ç–∫—É–¥–∞ –º–æ–∂–Ω–æ –ø–æ–ø–∞—Å—Ç—å
- –¢—Ä–µ—Ç—å–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ - –∫—É–¥–∞ –≤–µ–¥–µ—Ç –∏ –ø—Ä–∏ –∫–∞–∫–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö

**FSM –ø–æ–ª—è:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ –ø–æ–ª–µ–π
- –ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Ç–∏–ø—ã –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ö–µ–º–µ

### üîó –°–≤—è–∑–∏

**–ò–∑–±–µ–≥–∞–π—Ç–µ —Ü–∏–∫–ª–æ–≤:**
```json
// –ü–ª–æ—Ö–æ:
A ‚Üí B ‚Üí A

// –•–æ—Ä–æ—à–æ:
A ‚Üí B ‚Üí C
     ‚Üì
     retry_A (–≤–æ–∑–≤—Ä–∞—Ç —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º)
```

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±—â–∏–µ –≤–∏–¥–∂–µ—Ç—ã:**
```json
// –í–º–µ—Å—Ç–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –≤–∏–¥–∂–µ—Ç–æ–≤ –æ—à–∏–±–æ–∫:
"to": {
  "error": "show_generic_error"  // –û–±—â–∏–π –≤–∏–¥–∂–µ—Ç
}
```

### üéØ FSM –¥–∞–Ω–Ω—ã–µ

**–ú–∏–Ω–∏–º–∏–∑–∏—Ä—É–π—Ç–µ —Ö—Ä–∞–Ω–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –•—Ä–∞–Ω–∏—Ç–µ —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤–∏–¥–∂–µ—Ç–æ–≤
- –ò–∑–±–µ–≥–∞–π—Ç–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ë–î

**–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Ç–∏–ø—ã:**
```json
// –í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ñ–∞–π–ª–µ fsm_schemas.json:
{
  "user_id": {"type": "int", "description": "ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î"},
  "company_name": {"type": "str", "max_length": 100, "description": "–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏"}
}
```

### üö¶ –°–æ—Å—Ç–æ—è–Ω–∏—è FSM

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ –∏–º–µ–Ω–∞:**
- `waiting_company_name` ‚úÖ
- `state_1` ‚ùå

**–ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ –ø–æ —Ñ—É–Ω–∫—Ü–∏—è–º:**
- `waiting_*` - –æ–∂–∏–¥–∞–Ω–∏–µ –≤–≤–æ–¥–∞
- `processing_*` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- `show_*` - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

### üìÇ Answer-—Ñ–∞–π–ª—ã

**–ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ Answer-—Ñ–∞–π–ª–æ–≤:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–º–µ–Ω–∞, –æ—Ç—Ä–∞–∂–∞—é—â–∏–µ —Å—É—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è: `empty.py`, `success.py`, `error.py`
- –ò–∑–±–µ–≥–∞–π—Ç–µ `answer1.py`, `answer2.py` - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ –∏–º–µ–Ω–∞

**–£—Å–ª–æ–≤–∏—è –≤—ã–∑–æ–≤–∞:**
- –£—Å–ª–æ–≤–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å **–≤–∑–∞–∏–º–æ–∏—Å–∫–ª—é—á–∞—é—â–∏–º–∏** - —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω Answer –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ—Å—Ç—ã–µ Python-–≤—ã—Ä–∞–∂–µ–Ω–∏—è: `len(items) == 0`, `balance >= required`
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –≤ `condition` —Ç–æ—á–Ω—ã–π –∫–æ–¥ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–∑ `Code._route_to_answer()`

**–û–ø–∏—Å–∞–Ω–∏—è Answer-–æ–≤:**
- –ù–∞—á–∏–Ω–∞–π—Ç–µ —Å "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞..."
- –£–∫–∞–∂–∏—Ç–µ —á—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è (–∫–Ω–æ–ø–∫–∏, –¥–∞–Ω–Ω—ã–µ)
- –û–ø–∏—à–∏—Ç–µ –¥–∞–ª—å–Ω–µ–π—à–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ü—Ä–∏–º–µ—Ä —Ö–æ—Ä–æ—à–µ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è:**
```json
"answers": {
  "empty.py": {
    "condition": "len(vacancies) == 0",
    "description": "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –≤–∞–∫–∞–Ω—Å–∏–π. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –±–æ–ª—å—à—É—é –∫–Ω–æ–ø–∫—É '–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é –≤–∞–∫–∞–Ω—Å–∏—é'.",
    "sets_state": "vacancy_creation"
  }
}
```

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–î–∞–Ω–Ω–∞—è —Å—Ö–µ–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- üìñ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Å—å –≥—Ä–∞—Ñ –≤–∏–¥–∂–µ—Ç–æ–≤ –±–æ—Ç–∞
- üîç –í–∏–¥–µ—Ç—å –≤—Å–µ —Å–≤—è–∑–∏ –∏ –ø–µ—Ä–µ—Ö–æ–¥—ã
- ‚úÖ –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Å—Ö–µ–º—ã
- üé® –í–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ç–æ–∫ —Ä–∞–±–æ—Ç—ã
- üîß –£–ø—Ä–æ—Å—Ç–∏—Ç—å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

### –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å:

1. **–û–ø–∏—Å—ã–≤–∞–µ–º –≤–∏–¥–∂–µ—Ç –≤ JSON** - —Ñ–∏–∫—Å–∏—Ä—É–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É
2. **–°–æ–∑–¥–∞–µ–º state** - –¥–æ–±–∞–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–∑ —Å—Ö–µ–º—ã
3. **–°–æ–∑–¥–∞–µ–º callback** - –¥–æ–±–∞–≤–ª—è–µ–º –∫–æ–ª–±–µ–∫–∏ –∏–∑ —Å—Ö–µ–º—ã
4. **–°–æ–∑–¥–∞–µ–º handler** - —Ä–µ–∞–ª–∏–∑—É–µ–º –≤–∏–¥–∂–µ—Ç –ø–æ —Å—Ö–µ–º–µ
5. **–û–±–Ω–æ–≤–ª—è–µ–º —Å—Ö–µ–º—É** - –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

–£—Å–ø–µ—à–Ω–æ–≥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞! üöÄ
